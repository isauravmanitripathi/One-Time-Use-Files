<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
 </head>
 <body>
  <h1>
   <b>
    Forward-starting CDO Tranche
   </b>
  </h1>
  <p block-type="Text">
   At the core of any CDO pricing model is a mechanism for generating dependent defaults. If a simple factor structure is used to join their marginal distributions, the default times of the underlying credits are independent conditionally on the realization of the common factor(s). This conditional independence of defaults is very useful because it allows one to use quasi-analytical algorithms to compute the term structure of expected tranche losses, which is the fundamental ingredient for the valuation of a synthetic CDO.
  </p>
  <p block-type="Text">
   Because of their analytical tractability, conditionally independent models have become a standard in the synthetic CDO market. In the next section, we review the one-factor Gaussian-copula model, which has played a dominant role since the early days of single-tranche trading.
  </p>
  <h2>
   <b>
    The Gaussian-copula Model
   </b>
  </h2>
  <p block-type="Text">
   In the one-factor Gaussian-copula framework, the dependence of the default times is Gaussian, and is therefore completely specified by their correlations. In this model, given a particular realization of a normally distributed common factor
   <i>
    Y
   </i>
   , the probability that the
   <i>
    j
   </i>
   th credit defaults by time
   <i>
    t
   </i>
   is equal to
  </p>
  <p block-type="Equation">
   <math display="block">
    \pi_{j,t}(Y) = N\left(\frac{D_{j,t} - \beta_j \cdot Y}{\sqrt{1 - \beta_j^2}}\right),\newline j = 1, 2, \dots M\tag{1}
   </math>
  </p>
  <p block-type="TextInlineMath">
   where
   <i>
    N (.)
   </i>
   denotes the standard Gaussian distribution function, the vector {
   <i>
    βj
   </i>
   } determines the correlations of the default times, {
   <i>
    Dj,t
   </i>
   } are free parameters chosen to satisfy
  </p>
  <p block-type="Equation">
   <math display="block">
    p_{j,t} = \int_{Y} \pi_{j,t}(Y) \, \mathrm{d}N(Y) \tag{2}
   </math>
  </p>
  <p block-type="TextInlineMath">
   and
   <i>
    pj,t
   </i>
   are the (unconditional) probabilities that name
   <i>
    j
   </i>
   defaults by time
   <i>
    t
   </i>
   . Importantly, for the CDO model to price the underlying credit default swap (CDS) correctly,
   <i>
    pj,t
   </i>
   must be backed out from the term structure of observable CDS spreads.
  </p>
  <p block-type="Text">
   Given a realization of the Gaussian factor
   <i>
    Y
   </i>
   , the
   <i>
    M
   </i>
   individual credits are independent, and a simple recursive procedure [2] can then be employed to recover the conditional loss distribution of the underlying portfolio, as well as the loss distribution of any particular tranche of interest. Once we know how to compute the loss distribution of a tranche for a given realization of the common factor, it is straightforward to take a probability-weighted average across all possible realizations of
   <i>
    Y
   </i>
   and thus recover the unconditional loss distribution of the tranche.
  </p>
  <p block-type="Text">
   Repeating this procedure for a grid of horizon dates and interpreting the expected percentage loss up to time
   <i>
    t
   </i>
   as a "cumulative default probability", we can price the tranche using exactly the same analytics that we would use for pricing a CDS. More precisely, we can define the "tranche curve" as the term structure of expected surviving percentage notionals of the tranche, that is,
  </p>
  <p block-type="Equation">
   <math display="block">
    Q(t) = 1 - E\left[\frac{[L_t - U]^+ - [L_t - (U + V)]^+}{V}\right]
   </math>
   (3)
  </p>
  <p block-type="Text">
   where
   <i>
    Lt
   </i>
   is the number of loss units experienced by the reference portfolio by time
   <i>
    t,U
   </i>
   is the number of loss units that the tranche can withstand (attachment), and
   <i>
    V
   </i>
   is the number of loss units protected by the tranche investor. Then the two legs of the swap can be priced using
  </p>
  <p block-type="Equation">
   Premium =
   <math display="block">
    cN \sum_{i=1}^{T} \Delta_i Q(t_i) B(t_i)
   </math>
   (4)
  </p>
  <p block-type="Equation">
   Protection =
   <math display="block">
    N \sum_{i=1}^{T} B(t_i) (Q(t_{i-1}) - Q(t_i))
   </math>
   (5)
  </p>
  <p block-type="TextInlineMath">
   where
   <i>
    c
   </i>
   is the annual coupon paid on the tranche,
   <i>
    N
   </i>
   is the notional of the tranche,
   <i>
    ti
   </i>
   ,
   <i>
    i
   </i>
   = 1
   <i>
    ,
   </i>
   2
   <i>
    ,...,T
   </i>
   are the coupon dates,
   <i>
    i
   </i>
   ,
   <i>
    i
   </i>
   = 1
   <i>
    ,
   </i>
   2
   <i>
    ,...,T
   </i>
   are accrual factors, and
   <i>
    B(t)
   </i>
   is the risk-free discount factor for time
   <i>
    t
   </i>
   . Notice that, for ease of notation, we have used the coupon dates
   <i>
    ti
   </i>
   ,
   <i>
    i
   </i>
   = 1
   <i>
    ,
   </i>
   2
   <i>
    ,...,T
   </i>
   to discretize the timeline for the valuation of the protection leg.
  </p>
  <h2>
   <b>
    Pricing of Reset Tranches
   </b>
  </h2>
  <p block-type="Text" class="has-continuation">
   Let us define a reset tranche as a path-dependent tranche whose attachment and/or width are reset
   <i>
    at
   </i>
  </p>
  <p block-type="Text">
   <i>
    a predetermined time (the reset date) as deterministic functions of the random amount of losses incurred by the reference portfolio up to that time
   </i>
   . Notice that forward-starting tranches and tranches whose attachment point resets at a future date both belong to this class.
  </p>
  <h4>
   <i>
    Pricing a Reset Tranche
   </i>
  </h4>
  <p block-type="TextInlineMath">
   Let
   <i>
    ts
   </i>
   denote the reset date,
   <i>
    λj
   </i>
   ,
   <i>
    j
   </i>
   = 1
   <i>
    ,
   </i>
   2
   <i>
    ,...,M
   </i>
   , the number of loss units produced by the default of the
   <i>
    j
   </i>
   th name,
   <i>
    λ
   </i>
   =
   <i>
    λj
   </i>
   the maximum number of loss units that the portfolio can suffer,
   <i>
    p(ω)
   </i>
   the probability today that the reference portfolio incurs exactly
   <i>
    ω
   </i>
   loss units by the reset date
   <i>
    ts
   </i>
   .
  </p>
  <p block-type="TextInlineMath">
   A reset tranche can be defined by the vector {
   <i>
    tT , ts, U, V , U (ω), V (ω)
   </i>
   } where
   <i>
    U (ω)
   </i>
   ≥
   <i>
    ω
   </i>
   is the attachment point of the tranche (in loss units) after the reset date, and
   <i>
    V (ω)
   </i>
   is the number of loss units protected by the tranche investor after the reset date. We can price the two legs of this swap as follows:
  </p>
  <p block-type="Text">
   Premium
  </p>
  <p block-type="Equation">
   <math display="block">
    = cN \sum_{\omega=0}^{\lambda} p(\omega) \sum_{i=1}^{T} \Delta_i Q(t_i; \omega) B(t_i) \quad (6)
   </math>
  </p>
  <p block-type="Text">
   Protection
  </p>
  <p block-type="Equation">
   <math display="block">
    = N \sum_{\omega=0}^{\lambda} p(\omega) \sum_{i=1}^{T} B(t_i) (Q(t_{i-1}; \omega) - Q(t_i; \omega))
   </math>
   (7)
  </p>
  <p block-type="TextInlineMath">
   where we have defined the
   <i>
    conditional
   </i>
   tranche curve
   <i>
    Q(t
   </i>
   ;
   <i>
    ω)
   </i>
   ,
   <i>
    t
   </i>
   <sup>
    0
   </sup>
   ≤
   <i>
    t
   </i>
   ≤
   <i>
    tT
   </i>
   , as
  </p>
  <p block-type="TextInlineMath">
   In words, the conditional tranche curve
   <i>
    Q(t
   </i>
   ;
   <i>
    ω)
   </i>
   represents the (risk-neutral) expected percentage surviving notional of the tranche at time
   <i>
    t
   </i>
   , conditional on the event that the reference portfolio experiences a cumulative loss of
   <i>
    ω
   </i>
   units up to the reset date.
  </p>
  <p block-type="Text">
   Equally, we can write down the valuation in terms of the
   <i>
    unconditional
   </i>
   tranche curve
  </p>
  <p block-type="Equation">
   <math display="block">
    Q(t) = \sum_{\omega=0}^{\lambda} p(\omega) \cdot Q(t; \omega) \tag{9}
   </math>
  </p>
  <p block-type="Text">
   and thus obtain the familiar equations
  </p>
  <p block-type="Equation">
   <math display="block">
    \text{Premium} = cN \sum_{i=1}^{T} \Delta_i Q(t_i) B(t_i) \tag{10}
   </math>
  </p>
  <p block-type="Equation">
   Protection =
   <math display="block">
    N \sum_{i=1}^{T} B(t_i)(Q(t_{i-1}) - Q(t_i))
   </math>
   (11)
  </p>
  <p block-type="TextInlineMath">
   However, while the unconditional tranche curve for
   <i>
    t
   </i>
   <sup>
    0
   </sup>
   ≤
   <i>
    t
   </i>
   ≤
   <i>
    ts
   </i>
   reduces to the standard tranche curve defined in the section The Gaussian-copula Model,
  </p>
  <p block-type="Equation">
   <math display="block">
    Q(t) = \sum_{\omega=0}^{\lambda} p(\omega) \cdot Q(t; \omega) = 1 - \sum_{\omega=0}^{\lambda} p(\omega)
   </math>
   <math display="block">
    \times E\left[\frac{[L_t - U]^+ - [L_t - (U + V)]^+}{V} | L_{t_s} = \omega\right]
   </math>
   <math display="block">
    = 1 - E\left[\frac{[L_t - U]^+ - [L_t - (U + V)]^+}{V}\right]
   </math>
   (12)
  </p>
  <p block-type="Equation">
   <math display="block">
    Q(t;\omega) = T(t,\omega) \cdot \left(1 - E\left[\frac{\left[L_t - U(t;\omega)\right]^+ - \left[L_t - (U(t;\omega) + V(t;\omega))\right]^+}{V(t;\omega)} | L_{t_s} = \omega\right]\right),\,
   </math>
   <math display="block">
    T(t,\omega) = 1 - 1_{\{t &gt; t_s\}} \frac{\left[\omega - U\right]^+ - \left[\omega - (U+V)\right]^+}{V},\,
   </math>
   <math display="block">
    U(t;\omega) = \begin{cases} U, t \le t_s\\ U(\omega), t &gt; t_s \end{cases},\,
   </math>
   <math display="block">
    V(t;\omega) = \begin{cases} V, t \le t_s\\ V(\omega), t &gt; t_s \end{cases},\,
   </math>
   <math display="block">
    (8)
   </math>
  </p>
  <p block-type="Text">
   the unconditional tranche curve for
   <i>
    ts &lt; t
   </i>
   ≤
   <i>
    tT
   </i>
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{v_1, v_2}^0 = 0 \text{ otherwise} \tag{15}
   </math>
  </p>
  <p block-type="Equation">
   <math display="block">
    Q(t) = \sum_{\omega=0}^{\lambda} p(\omega) \cdot Q(t; \omega)
   </math>
   <br/>
   =
   <math display="block">
    \sum_{\omega=0}^{\lambda} p(\omega) \cdot T(t, \omega) \cdot \left(1 - E\left[\frac{[L_t - U(\omega)]^+ - [L_t - (U(\omega) + V(\omega))]^+}{V(\omega)} | L_{t_s} = \omega\right]\right) \tag{13}
   </math>
  </p>
  <p block-type="Text">
   incorporates the added complexity of the pathdependent valuation.
  </p>
  <h4>
   <i>
    Deriving the Conditional Tranche Curve
   </i>
  </h4>
  <p block-type="TextInlineMath">
   Our discussion so far leaves open the problem of constructing the conditional tranche curve. From the previous discussion, it should be clear that to achieve this goal we need to be able to compute conditional expectations of the form
   <i>
    E f Ltu , ω
   </i>
   |
   <i>
    Lts
   </i>
   =
   <i>
    ω
   </i>
   for some function
   <i>
    f
   </i>
   . In this section, we present a twodimensional recursive algorithm for computing the joint distribution of cumulative losses at two different horizons, which in turn allows us to compute the conditional expectations that we need. The methodology is conceptually similar to the one introduced by Baheti
   <i>
    et al.
   </i>
   [3] for pricing "squared" products.
  </p>
  <p block-type="TextInlineMath">
   As anticipated, we assume that the underlying default model exhibits the property of conditional independence. We exploit this by conditioning our procedure on a particular realization of a common factor
   <i>
    Y
   </i>
   . We first discretize losses in the event of default by associating each credit with the number of loss units that its default would produce: we indicate by
   <i>
    λj
   </i>
   the integer number of loss units that would result from the default of name
   <i>
    j
   </i>
   . Next, we construct a square matrix
   <i>
    Zv
   </i>
   1
   <i>
    ,v
   </i>
   <sup>
    2
   </sup>
   whose sides consist of all possible loss levels for the reference portfolio, that is,
   <i>
    (
   </i>
   0
   <i>
    ,
   </i>
   1
   <i>
    ,...,λ)
   </i>
   . In this matrix, we store the joint probabilities that the reference portfolio incurs
   <i>
    v
   </i>
   <sup>
    1
   </sup>
   loss units up to time
   <i>
    ts
   </i>
   and
   <i>
    v
   </i>
   <sup>
    2
   </sup>
   loss units up to time
   <i>
    tu
   </i>
   , with
   <i>
    tu
   </i>
   ≥
   <i>
    ts
   </i>
   . By definition of cumulative loss, the matrix must be upper triangular, that is,
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{v_1, v_2} = 0 \text{ if } v_2 &lt; v_1 \tag{14}
   </math>
  </p>
  <p block-type="TextInlineMath">
   For the nontrivial elements where
   <i>
    v
   </i>
   <sup>
    2
   </sup>
   ≥
   <i>
    v
   </i>
   1, we set up the following recursion. We first initiate each state (recursion step
   <i>
    j
   </i>
   = 0) by setting
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{v_1,v_2}^0 = 1
   </math>
   , if
   <math>
    v_1 = 0
   </math>
   and
   <math>
    v_2 = 0
   </math>
  </p>
  <p block-type="Equation">
  </p>
  <p block-type="Equation">
   We preserve the notation adopted during our description of the Gaussian-copula model and denote by
   <math display="block">
    \pi_{j,t}(Y)
   </math>
   the probability that name
   <i>
    j
   </i>
   defaults by time
   <i>
    t
   </i>
   , conditional on the market factor taking value
   <i>
    Y
   </i>
   . Now we feed one credit at a time into the recursion and update each element according to the following:
  </p>
  <p block-type="Text">
   If
   <i>
    v
   </i>
   <sup>
    1
   </sup>
   ≥
   <i>
    λj
   </i>
   , then
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{v_1, v_2}^j = (1 - \pi_{j,u}(Y)) \cdot Z_{v_1, v_2}^{j-1}
   </math>
   <br/>
   +
   <math>
    \pi_{j,s}(Y) \cdot Z_{(v_1 - \lambda_j), (v_2 - \lambda_j)}^{j-1}
   </math>
   <br/>
   +
   <math>
    (\pi_{j,u}(Y) - \pi_{j,s}(Y)) \cdot Z_{(v_1), (v_2 - \lambda_j)}^{j-1}
   </math>
   (16)
  </p>
  <p block-type="TextInlineMath">
   If
   <i>
    v
   </i>
   <sup>
    2
   </sup>
   <i>
    &lt; λj
   </i>
   , then
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{v_1, v_2}^j = (1 - \pi_{j,u}(Y)) \cdot Z_{v_1, v_2}^{j-1} \tag{17}
   </math>
  </p>
  <p block-type="TextInlineMath">
   If
   <i>
    v
   </i>
   <sup>
    1
   </sup>
   <i>
    &lt; λj
   </i>
   ≤
   <i>
    v
   </i>
   2, then
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{v_1, v_2}^j = (1 - \pi_{j,u}(Y)) \cdot Z_{v_1, v_2}^{j-1}
   </math>
   <br/>
   +
   <math display="block">
    (\pi_{j,u}(Y) - \pi_{j,s}(Y)) \cdot Z_{(v_1), (v_2 - \lambda_j)}^{j-1}
   </math>
   (18)
  </p>
  <p block-type="Text">
   After including all the issuers, we set
  </p>
  <p block-type="Equation">
   <math display="block">
    \left(Z_{v_1,v_2}\right) = \left(Z_{v_1,v_2}^M\right) \tag{19}
   </math>
  </p>
  <p block-type="TextInlineMath">
   The matrix
   <i>
    Zv
   </i>
   1
   <i>
    ,v
   </i>
   <sup>
    2
   </sup>
   now holds the joint loss distribution of the reference portfolio at the two horizon dates
   <i>
    ts
   </i>
   and
   <i>
    tu
   </i>
   , conditional on the realization of the market factor
   <i>
    Y
   </i>
   , and we can numerically integrate over the common factor to recover the unconditional joint loss distribution. Using the joint distribution of losses at different horizons, it is then straightforward, for any function
   <i>
    f (.)
   </i>
   , to compute conditional expectations of the form
   <i>
    E f Ltu , ω
   </i>
   |
   <i>
    Lts
   </i>
   =
   <i>
    ω
   </i>
   , which is how we construct the conditional tranche curve.
  </p>
  <h2>
   <b>
    Comments
   </b>
  </h2>
  <p block-type="Text" class="has-continuation">
   We have presented a simple methodology for quasianalytically pricing a class of default-path-dependent
  </p>
  <p block-type="Text">
   tranches. The proposed methodology is general in the sense that it can be easily applied to any model with conditionally independent defaults, including "implied copula" models fitted to liquidly traded tranches as in the Hull–White [4] model. The algorithm is useful because fast pricing of reset tranches allows one to obtain a variety of Greeks that are essential for effective risk management.
  </p>
  <p block-type="Text" class="has-continuation">
   As observed by Andersen [1], however, some caution is necessary when pricing instruments whose valuation is sensitive to the joint distribution of cumulative losses at different horizons. Liquidly traded tranches only contain information about marginal loss distributions and tell us nothing about their dependence. Implying a default time copula from these prices, therefore, implicitly contains an arbitrary assumption about intertemporal dependencies, and it is easy to verify that different implied copulae
  </p>
  <p block-type="Text">
   that fit observable prices equally well may produce significantly different valuations for path-dependent instruments.
  </p>
  <h2>
   <b>
    References
   </b>
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     [1] Andersen, L. (2006). Portfolio losses in factor models: term structures and intertemporal loss dependence,
     <i>
      Journal of Credit Risk
     </i>
     <b>
      4
     </b>
     , 71–78.
    </li>
    <li block-type="ListItem">
     [2] Andersen, L., Sidenius, J. &amp; Basu, S. (2003). All your hedges in one basket,
     <i>
      Risk
     </i>
     November, 67–72.
    </li>
    <li block-type="ListItem">
     [3] Baheti, P., Mashal, R., Naldi, M. &amp; Schloegl, L. (2005). Squaring factor copula models,
     <i>
      Risk
     </i>
     June, 73–76.
    </li>
    <li block-type="ListItem">
     [4] Hull, J. &amp; White, A. (2006).
     <i>
      The Perfect Copula
     </i>
     . Working Paper, University of Toronto.
    </li>
   </ul>
  </p>
  <h3>
   PRASUN BAHETI, ROY MASHAL &amp; MARCO NALDI
  </h3>
 </body>
</html>
