# **Recursive Preferences**

The standard additive utility model defines time*t* utility for a discrete-time consumption process {*ct* ; *t* = 1*,...,T* } as

$$U_t = E_t \sum_{s=t}^{T} e^{-\beta(s-t)} u(c_s) = E_t \{ u(c_t) + e^{-\beta} U_{t+1} \}$$
(1)

where *Et* denotes the conditional expectation. The virtue of the model is its simplicity: only discounted probabilities and the function *u* determine preferences. However, the additive treatment of states and times precludes the model from distinguishing between aversion to variability in consumption across states and across time. In fact, the agent's preferences are entirely determined by preferences over deterministic consumption streams (see [23]). Furthermore, because agents care only about the distribution of future consumption, they do not care about the temporal resolution of uncertainty.

A more flexible preference model is obtained with Kreps and Porteus [14] recursive specification (see also [11]):

$$U_t = F(c_t, E_t u(U_{t+1})), \quad U_T = v(c_T) \quad (2)$$

where the aggregator function *F* models intertemporal substitution and *u* the aversion to risk in next period's utility. The popular Epstein and Zin [12] model is the special case characterized by scaleinvariant preferences (*Ut* homogeneous in *(ct, Ut*<sup>+</sup>1*)* and *v(c)* = *c*) and constant elasticity of substitution. The stochastic differential utility (SDU) formulation

$$U_t = E_t \left( \int_{s=t}^T b(c_s, U_s) \mathrm{d}s + \frac{1}{2} a(U_s) \mathrm{d}[U, U]_s \right) \tag{3}$$

where [·*,* ·] denotes quadratic variation, which was obtained by Duffie and Epstein [8] as the continuoustime limit of recursive utility. Time-additive utility is the special case *b(c, U )* = *u(c)* − *βU* and *a* = 0. Skiadas [22] shows that SDU includes the robust control formulations of Anderson *et al.* [1], Hansen *et al.* [13], and Maenhout [17]. It is straightforward to show that SDU also includes the continuous-time limit of Chew [3] and Dekel [7] preferences.

In this paper, we examine the generalized SDU model, given in differential form by equation (5). This preference model was introduced by Lazrak and Quenez [15] to unify the recursive formulation of Duffie and Epstein [8] and multiple-prior formulation of Chen and Epstein [2]. Schroder and Skiadas [19] and Skiadas [23] (see also [20] for the case with jumps) show that the more flexible form of the aggregator allows preferences to depend on the source of risk (e.g., domestic *versus* foreign), as well as first-order risk aversion (which imposes a higher penalty for small levels of risk) in addition to the standard second-order risk aversion dependence in equation (3).a

Relative to the time-additive model, the loss of tractability under generalized SDU is surprisingly small and mainly confined to the complete-markets setting. In the case of power utility, for example, once incompleteness or market constraints are imposed, the additive problem is no simpler to solve than a more general class of scale-invariant (homothetic) recursive utility. The tractability of the most popular additive utility models is obtained not from additivity but from the scale or translation invariance property. The second and third sections examine the recursive classes with these invariance properties and show that their solution essentially reduces to solving a single constrained backward stochastic differential equation.

After defining the preferences and markets in the second and third sections, the general solution to the optimal portfolio and consumption problem is presented in the fourth section. The solution is obtained by first characterizing the utility supergradient density (a generalization of marginal utility) and the stateprice density. The state-price result is useful in other asset-pricing applications because it characterizes the set of pricing operators consistent with no arbitrage in a general market setting.b The optimal consumption process is obtained by equating a supergradient density and state-price density (a generalized notion of equating marginal utility and prices). All results in this article are based on [18–20]; these references also develop more specialized and tractable formulations, based on quadratic modeling of risk aversion, and the last introduces jump risk (modeled by marked point processes).

All uncertainty is generated by *d*-dimensional standard Brownian motion *B* over the finite time horizon [0*, T* ], supported by a probability space *(-,* F*,P)*. All processes dealt with in this article are assumed to be progressively measurable with respect to the augmented filtration {F*<sup>t</sup>* : *t* ∈ [0*, T* ]} generated by  $B$ . We define a *cash flow* as a process  $x$  such that  $E\left[\int_0^T x_t^2 \mathrm{d}t + x_T^2\right] < \infty$ . We interpret  $x_t$  as a time-t payment rate and  $x_T$  as a lump-sum terminal payment. The set of all cash flows is denoted  $\mathcal{H}$ , which we regard as a Hilbert space under the inner product

$$(x|y) = E\left[\int_0^T x_t y_t \mathrm{d}t + x_T y_T\right], \quad x, y \in \mathcal{H} \quad (4)$$

The set of *consumption plans* is the convex cone  $C \subseteq \mathcal{H}$ . Finally, we let  $S_p$ ,  $p = 1, 2$ , denote the set of cash flows, satisfying  $E\left[\left(\text{ess sup}_{t\in[0,T]}|x_t|^p\right)\right] < \infty$ . The qualification "almost surely" is omitted throughout. The coefficients of all the stochastic differential equations introduced will be assumed sufficiently integrable so that the equations are well defined.

#### **Recursive Preferences**

We define preferences in terms of a *utility aggregator*,  $F: \Omega \times [0, T] \times \mathbb{R}^{2+d} \to \mathbb{R}$ . For every consumption plan  $c \in \mathcal{C}$ , we assume that there is a unique solution  $(U, \Sigma)$  to the backward stochastic differential equation (BSDE):

$$\begin{aligned} \mathrm{d}U_t &= -F(t, c_t, U_t, \Sigma_t) \,\mathrm{d}t + \Sigma'_t \mathrm{d}B_t, \\ U_T &= F(T, c_T) \end{aligned} \tag{5}$$

(terminal utility depends only on  $(\omega, T, c_T)$ ), and we define  $U(c) = U$ . Throughout we assume that F is differentiable,  $F(\omega, t, \cdot)$  is concave, and that the range of  $F_c(\omega, t, \cdot, U, \Sigma)$  is  $(0, \infty)$ . SDU is the special case  $F(\omega, t, c, U, \Sigma) = b(\omega, t, c, U) +$  $\frac{1}{2}a(\omega, t, U)\Sigma'\Sigma$ , and standard additive utility corresponds to the linear aggregator  $F(\omega, t, c, U, \Sigma) =$  $u(t, c) - \beta(t)U$ . A multiple-priors formulation of [2] is given by

$$dU_t = -\left(b(t, c_t, U_t) - \max_{\theta \in \Theta_t} \theta' \Sigma_t\right) dt + \Sigma'_t dB_t \tag{6}$$

for some function  $\Theta$  from  $\Omega \times [0, T]$  to the set of convex compact subsets of  $\mathbb{R}^d$ .

#### **Markets and the Wealth Equation**

The agent is endowed with initial financial wealth  $w_0$ and an endowment process  $e \in \mathcal{H}$ . The dollar value of

the agent's position in  $m$  risky assets is represented by the process  $\phi = (\phi^1, \dots, \phi^m)'$ . The agent's financial wealth process (not including the present value of the future endowment). W, is defined in terms of the wealth aggregator  $f: \Omega \times [0, T] \times \mathbb{R}^{m+1} \to \mathbb{R}$ , which represents the instantaneous expected growth of the agent's portfolio. Cuoco and Cvitanić [4] propose a nonlinear wealth aggregator to model the price impact of a large investor or differential borrowing and lending rates. Trading and wealth constraints are modeled by requiring the vector  $(W_t, \phi_t)$  to lie in a convex set  $K \subseteq \mathbb{R}^{1+m}$  at all times. The returns diffusion matrix is an  $\mathbb{R}^{d \times m}$  -valued process  $\sigma^R$ . The agent's plan  $(c, W, \phi)$  is *feasible* if it satisfies the *budget equation* 

$$\begin{aligned} \mathrm{d}W_t &= (f(t, W_t, \phi_t) + e_t - c_t) \mathrm{d}t + \phi'_t \sigma_t^{R'} \mathrm{d}B_t, \\ W_0 &= w_0, \quad c_T = W_T + e_T, \quad (W_t, \phi_t) \in K \end{aligned} \tag{7}$$

and the integrability conditions  $\int_0^t (|f(s, W_s, \phi_s)| +$  $\phi_{s}^{\prime}\sigma_{s}^{R\prime}\sigma_{s}^{R}\phi_{s}$ )ds  $< \infty$  and  $(-W_{t})^{+} \in \mathcal{S}_{2}$  (the latter to rule out doubling-type strategies). A consumption plan  $c$  is feasible if it is part of a feasible plan  $(c, W, \phi).$ 

**Example 1 Linear Budget Equation.** Suppose that a money-market security pays interest at a rate  $r_t$ , and the risky assets' instantaneous excess returns relative to r are  $dR_t = \mu_t^R dt + \sigma_t^{R'} dB_t$ . Then we get the standard case:

$$f(\omega, t, w, \alpha) = r(\omega, t)w + \alpha' \mu^{R}(\omega, t),$$
$$(w, \alpha) \in K \tag{8}$$

Example 2 Different Borrowing and Lending **Rates.** Extending Example 1, if  $b$  is a strictly positive process and money-market lending and borrowing occur at the rates  $r_t$  and  $r_t + b_t$ , respectively, then

$$f(\omega, t, w, \alpha) = r(\omega, t)w + \mu^{R}(\omega, t)'\alpha - b(\omega, t)$$
$$\times (\mathbf{1}'\alpha - w)^{+}, \quad (w, \alpha) \in K \quad (9)$$

For a related analysis, see Appendix B of  $[6]$ .

#### **General Solution Method**

The agent's problem is to choose an optimal consumption plan: a feasible c such that  $U(c) \ge U(\tilde{c})$  for all other feasible consumption plans  $\tilde{c}$ . We first show that optimality of  $c$  is essentially equivalent to the utility supergradient density of  $U$  at  $c$  satisfying the conditions for a state-price density, and then characterize these density equations in terms of the utility and wealth aggregators defined above. The resulting first-order conditions satisfy a constrained forward-backward stochastic differential equation (FBSDE) system.

Given the feasible consumption plan  $c$ , the process  $\pi \in \mathcal{H}$  is a state-price density at c if

$$(\pi | x) \le 0$$
  
for all x such that  $c + x$  is a  
feasible consumption plan (10)

We can interpret  $(\pi|x)$  as the net present value of the cash flow  $x$ , which must be nonpositive for any feasible (i.e., affordable) incremental cash flow.

The process  $\pi \in \mathcal{H}$  is a *supergradient density* of  $U_0$  at c if

$$U_0(c+x) \le U_0(c) + (\pi|x)$$
  
for all x such that  $c+x \in \mathcal{C}$  (11)

and a *utility gradient density* of  $U_0$  at  $c$  if

$$(\pi|x) = \lim_{\alpha \downarrow 0} \frac{U_0(c + \alpha x) - U_0(c)}{\alpha} \quad \text{for all } x \text{ such}$$
  
that  $c + \alpha x \in \mathcal{C}$  for some  $\alpha > 0$  (12)

If  $\pi$  is a supergradient density of  $U_0$  at  $c$  and the utility gradient of  $U_0$  at  $c$  exists, then the utility gradient density is  $\pi$ .

The general optimality result follows.

**Proposition 1** Suppose that  $(c, W, \phi)$  is a feasible plan. If  $\pi \in \mathcal{H}$  is both a supergradient density of  $U_0$  at c and a state-price density at c, then the plan  $(c, W, \phi)$ is optimal. Conversely, if the plan  $(c, W, \phi)$  is optimal and  $\pi \in \mathcal{H}$  is a utility gradient density of  $U_0$  at c, then  $\pi$  is a state-price density at c.

To apply Proposition 1, we obtain the dynamics of the utility supergradient and state-price densities corresponding to the utility and market models, as discussed in the sections Recursive Preferences and Markets and the Wealth Equation. Both depend on the feasible reference plan  $(c, W, \phi)$  and are expressed in terms of the differential or superdifferential (in the absence of differentiability or in the presence of constraints) of the corresponding aggregator.

The superdifferential of  $f(t, \cdot)$  at  $(\omega, t, w, \alpha)$  relative to the constraint set K is the set  $\partial f(\omega, t, w, \alpha)$ of all pairs  $(d_w, d_\phi) \in \mathbb{R}^{1+m}$  such that

$$f(\omega, t, \tilde{w}, \tilde{\alpha}) - f(\omega, t, w, \alpha) \le d_w(\tilde{w} - w)$$
  
+  $d'_\n{\alpha}(\tilde{\alpha} - \alpha)$  for all  $(\tilde{w}, \tilde{\alpha}) \in K$  (13)

Sufficient conditions for a state-price density follow.c

**Proposition 2** *Suppose that*  $(c, W, \phi)$  *is feasible* and  $\pi \in \mathcal{H}_{++}$  satisfies

$$\frac{\mathrm{d}\pi_t}{\pi_t} = -\zeta_t \mathrm{d}t - \eta'_t \mathrm{d}B_t, \quad (\zeta_t, \sigma_t^{R'} \eta_t) \in \partial f(t, W_t, \phi_t) \tag{14}$$

and  $\pi W \in \mathcal{S}_1$ . Then  $\pi$  is a state-price density at c.

The process  $\eta$  is often called the *market price* of risk, with  $\eta_t^i$  representing the time-t shadow incremental expected wealth return per unit additional exposure to  $dB_t^i$ . The drift term  $\zeta$  represents the shadow incremental return per unit wealth. In the case of a linear budget equation (8) and  $K = \mathbb{R}^{1+m}$ (no constraints but possibly incomplete markets), we obtain the standard result  $\zeta_t = r_t$  and  $\mu_t^R = \sigma_t^{R'} \eta_t$ .

**Example 3 Collateral Constraint.** Suppose that there is a single risky asset  $(m = 1)$ , and, as in Example 1,  $f(\omega, t, w, \alpha) = r(\omega, t)w + \mu^{R}(\omega, t)\alpha$ . We consider an agent who faces the collateral constraint:

$$K = \{ (w, \alpha) \in \mathbb{R}^2 : w \ge \varrho |\alpha| \} \tag{15}$$

for some  $\varrho \in (0, 1)$ . Then condition  $(\zeta, \sigma^{R'} \eta) \in$  $\partial f(W, \phi)$  is equivalent to the following restrictions:

$$\begin{aligned} \delta_t &= \zeta_t - r_t \ge 0, \quad \varepsilon_t = \mu_t^R - \Theta_t \in [-\varrho \delta_t, \varrho \delta_t] \\ (\phi_t > 0 \Rightarrow \varepsilon_t = \varrho \delta_t), \quad (\phi_t < 0 \Rightarrow \varepsilon_t = -\varrho \delta_t), \\ (W_t > \varrho |\phi_t| \Rightarrow \delta_t = 0) \end{aligned} \tag{16}$$

Papers analyzing collateral constraints in a Brownian setting and additive utility include [5, 16].

Assuming differentiability of the utility aggregator  $F$  (nondifferentiability is accommodated by replacing the differential with a superdifferential defined as for  $f$ ), we now provide sufficient conditions for a utility supergradient density.

**Proposition 3** Suppose that  $c \in \mathcal{C}$ ,  $(U, \Sigma)$  solves BSDE (5),  $\pi \in \mathcal{H}_{++}$  satisfies

$$\pi_t = \mathcal{E}_t F_c(t, c_t, U_t, \Sigma_t) \tag{17}$$

where

$$\frac{\mathrm{d}\mathcal{E}_{t}}{\mathcal{E}_{t}} = F_{U}(t, c_{t}, U_{t}, \Sigma_{t})\mathrm{d}t + F_{\Sigma}(t, c_{t}, U_{t}, \Sigma_{t})'\mathrm{d}B_{t}, \quad \mathcal{E}_{0} = 1 \quad (18)$$

and  $\mathcal{E}U \in \mathcal{S}_1$ . Then,  $\pi$  is a utility gradient density of  $U_0$  at c.

The supergradient density expression  $(17)$  is consistent with the calculations of Skiadas [2], Duffie and Skiadas [9], Chen and Epstein [10], and El\_Karoui et al. [21]. All these papers assume Lipschitz-growth conditions that are violated in our setting.

We now apply Proposition 1 to characterize the first-order conditions. A key role in the solution is played by the strictly positive process

$$\lambda_t = F_c(t, c_t, U_t, \Sigma_t) \tag{19}$$

computed at the optimum, which represents the derivative of time- $t$  optimal utility with respect to time- $t$  wealth (as in the familiar envelope result). We solve for  $\mu^{\lambda}$  and  $\sigma^{\lambda}$  in the Ito expansion

$$\frac{\mathrm{d}\lambda_t}{\lambda_t} = \mu_t^{\lambda} \mathrm{d}t + \sigma_t^{\lambda'} \mathrm{d}B_t \tag{20}$$

by applying Ito's lemma to the utility gradient density,  $\pi_t = \mathcal{E}_t \lambda_t$ , and matching coefficients with those of the state-price density in Proposition 2. Having solved for  $\lambda$ , invert equation (19) to express the consumption plan  $c$  as

$$c_t = \mathcal{I}(t, \lambda_t, U_t, \Sigma_t) \tag{21}$$

where the function  $\mathcal{I}: \Omega \times [0, T] \times (0, \infty) \times \mathbb{R}^{d+1}$  $\rightarrow \mathbb{R}$  is defined implicitly through the following equation:

$$F_c(t, \mathcal{I}(t, y, U, \Sigma), U, \Sigma) = y, \quad y \in (0, \infty) \tag{22}$$

Combining the dynamics of  $\lambda$  with the utility  $BSDE(5)$ , the budget equation (7), and the statepricing restriction of Proposition 2, we obtain the optimality conditions in the form of a constrained FBSDE system:

$$\begin{aligned} \mathrm{d}U &= -F(\mathcal{I}(\lambda, U, \Sigma), U, \Sigma)\mathrm{d}t + \Sigma' \mathrm{d}B, \\ U_T &= F(T, W_T + e_T) \\ \frac{\mathrm{d}\lambda_t}{\lambda_t} &= -(\zeta + F_U + \sigma^{\lambda\prime} F_{\Sigma})\mathrm{d}t + \sigma^{\lambda\prime} \mathrm{d}B, \\ \lambda_T &= F_c(T, W_T + e_T) \\ \mathrm{d}W &= (f(W, \phi) + e - \mathcal{I}(\lambda, U, \Sigma))\mathrm{d}t + \phi' \sigma_t^{R\prime} \mathrm{d}B_t, \\ W_0 &= w_0 \\ (\zeta, -\sigma^{R\prime} (F_{\Sigma} + \sigma^{\lambda})) \in \partial f(W, \phi), \\ (\phi, W) \in K \end{aligned} \tag{23}$$

Given a solution  $(U, \Sigma, \lambda, \sigma^{\lambda}, W, \phi)$  and suitable integrability assumptions (to satisfy Propositions  $1-3$ ), then c in equation (21) defines an optimal consumption plan.

### Scale and Translation-invariant Solutions

The first-order conditions significantly simplify when utility and wealth dynamics fall into either the scale or translation-invariant classes. The scale-invariant, or homothetic, class exhibits homogeneity of degree one in consumption (when in certainty equivalent form) and includes, as special cases, homothetic Duffie-Epstein utility and additive power and log utility. The translation-invariant class exhibits quasilinearity with respect to a reference consumption stream and generalizes additive exponential utility. In both cases, the FBSDE of the first-order conditions uncouples into a single pure backward equation for  $\lambda$  and a pure forward equation for wealth.

#### Scale-invariant Class

We assume that consumption is strictly positive, and the aggregator  $F(\omega, t, \cdot)$  is homogeneous of degree one, allowing the representation

$$F(\omega, t, c, U, \Sigma) = UG\left(\omega, t, \frac{c}{U}, \frac{\Sigma}{U}\right),$$
$$F(T, c) = c \tag{24}$$

It is easy to confirm that utility is therefore homogeneous of degree one in consumption:

$$U(kc) = kU(c) \quad \text{for all } k \in \mathbb{R}_+ \text{ and } c \in \mathcal{C} \quad (25)$$

Defining  $\sigma_t^U = \Sigma_t/U_t$ , the BSDE (5) is equivalent to

 $\sim$ 

$$\frac{\mathrm{d}U_t}{U_t} = -G(t, c_t/U_t, \sigma_t^U)\mathrm{d}t + \sigma_t^{U'}\mathrm{d}B_t, \quad U_T = c_T \tag{26}$$

**Example 4** Schroder and Skiadas [19] show that the quasi-quadratic aggregator

$$G(\omega, t, x, \sigma) = g(\omega, t, x) - \frac{1}{2} \Sigma' Q(\omega, t) \Sigma \quad (27)$$

where Q is positive definite for all  $(\omega, t)$ , is particularly tractable, while allowing the modeling of source-dependent second-order risk aversion through  $Q$ . The continuous-time version of Epstein and Zin [11] is the special case with  $Q = \gamma I$ , for some constant  $\gamma > 0$ , and

$$g(\omega, t, x) = \alpha + \beta \frac{x^{1-\eta} - 1}{1-\eta} \tag{28}$$

for constants  $\alpha$  and  $\eta$ ,  $\beta > 0$ . Additive utility corresponds to  $\gamma = \eta$  (the coefficient of relative risk aversion is equal to the inverse of the elasticity of intertemporal substitution).

On the markets side, we assume that wealth is strictly positive; the endowment process,  $e$ , is zero; constraints are on investment proportions,  $\phi_t/W_t \in$  $K^1$ , for some convex set  $K^1 \subset \mathbb{R}^m$ ; and the wealth aggregator  $f(\omega, t, \cdot)$  is homogeneous of degree one. Letting  $\psi_t = \phi_t / W_t$  denote the vector of investment proportions, and defining  $f^1(t, \cdot) = f(t, 1, \cdot)$ , the budget equation  $(7)$  becomes

$$\frac{\mathrm{d}W_t}{W_t} = \left(f^1(t, \psi_t) - \frac{c_t}{W_t}\right) \mathrm{d}t + \psi'_t \sigma_t^{R'} \mathrm{d}B_t,$$
  
$$W_0 = w_0, \quad c_T = W_T, \quad \psi_t \in K^1 \tag{29}$$

(in the linear budget constraint case of Example 1, we have  $f^{1}(t, \psi_{t}) = r_{t} + \psi_{t}^{\prime} \mu_{t}^{R}$ .

The state-price density condition  $(\zeta_t, \sigma_t^{R'} \eta_t) \in$  $\partial f(t, W_t, \phi_t)$  is then equivalent to

$$\zeta_t = f^1(t, \psi_t) - \psi'_t \sigma_t^{R'} \eta_t \quad \text{and} \quad \sigma_t^{R'} \eta_t \in \partial f^1(t, \psi_t)$$
(30)

The scale-invariance properties imply that at the optimum utility is proportional to wealth:

$$U_t = \lambda_t W_t \tag{31}$$

and therefore  $\sigma_t^U = \sigma_t^{\lambda} + \sigma_t^R \psi_t$ . Recalling  $\lambda_t =$  $G_c(t, c_t/U_t, \sigma^U_t)$ , we define the inverse function  $\mathcal{I}^G()$  analogously to equation (22) to obtain  $c_t/U_t =$  $\mathcal{I}^G(t,\lambda_t,\sigma_t^U)$ . Defining the dual function of  $G^*$ 

$$G^*(t,\lambda,\sigma) = G(t,\mathcal{I}^G(t,\lambda,\sigma),\sigma) - \mathcal{I}^G(t,\lambda,\sigma)\lambda$$
(32)

we obtain the first-order conditions (necessary and sufficient) as a constrained backward equation for  $\lambda$ (independent of wealth):

$$\frac{\mathrm{d}\lambda}{\lambda_{-}} = -\left(G^{*}(\lambda, \sigma^{\lambda} + \sigma^{R}\psi) + f^{1}(\psi) + \psi'\sigma^{R'}\sigma^{\lambda}\right)\mathrm{d}t + \sigma_{t}^{\lambda'}\mathrm{d}B_{t}, \quad \lambda_{T} = 1,$$
$$-\sigma^{R}(G_{\sigma} + \sigma^{\lambda}) \in \partial f^{1}(\psi) \tag{33}$$

Given a solution  $(\lambda, \sigma^{\lambda}, \psi)$  and sufficient regularity, then  $c_t/W_t = \lambda_t \mathcal{I}^G(t,\lambda,\sigma)$  is substituted into the wealth equation to complete the solution.

#### Translation-invariant Class

We allow consumption to take any value in  $\mathbb{R}$  and fix some strictly positive and bounded reference consumption plan  $\gamma \in \mathcal{H}$ . The aggregator is assumed to satisfy

$$F(\omega, t, c, U, \Sigma) = G\left(\omega, t, \frac{c}{\gamma(\omega, t)} - U, \Sigma\right),$$
$$F(\omega, T, c) = \frac{c}{\gamma(\omega, T)}$$
(34)

which implies that U is quasilinear with respect to  $\gamma$ :

$$U(c+k\gamma) = U(c) + k \quad \text{for all } k \in \mathbb{R} \text{ and } c \in \mathcal{C}$$
(35)

**Example 5** Additive exponential utility corresponds to

$$G(\omega, t, x, \Sigma) = \beta(\omega, t) - \exp(-x) - \frac{1}{2} \Sigma' \Sigma$$
(36)

This follows because the ordinally equivalent utility  $V_t = -\exp(-U_t)$  satisfies (under suitable integrability restrictions)

$$V_{t} = E_{t} \left[ \int_{t}^{T} -\exp\left(-\int_{t}^{s} \beta_{u} du - \frac{c_{s}}{\gamma_{s}}\right) ds \right]$$

$$-\exp\left(-\int_{t}^{T}\beta_{u}\mathrm{d}u-\frac{c_{T}}{\gamma_{T}}\right)\right] \tag{37}$$

On the markets side, we assume that the reference consumption stream  $\gamma$  is part of the feasible plan  $(\gamma, \Gamma, \Gamma \kappa)$ :

$$\frac{\mathrm{d}\Gamma_{t}}{\Gamma_{t}} = \left(\mu_{t}^{\kappa} - \frac{\gamma_{t}}{\Gamma_{t}}\right) \mathrm{d}t + \kappa' \sigma_{t}^{R'} \mathrm{d}B_{t}, \quad \Gamma_{T} = \gamma_{T} \tag{38}$$

That is,  $\Gamma$  is the price of a fund paying dividend process  $\gamma$ ;  $\kappa \in \mathbb{R}^m$  represents the investment proportions of the fund; and  $\mu^{\kappa}$  is the fund's instantaneous expected return process.

For any  $(w, \alpha) \in K$ , we assume  $(w + v, \alpha +$  $v\kappa \in K$  and  $f(\omega, t, w + v, \alpha + v\kappa) = f(\omega, t, \alpha)$  $w, \alpha) + v\mu^{\kappa}(\omega, t)$  for all  $v \in \mathbb{R}$ . That is, trading in the portfolio  $\kappa$  is unrestricted and earns instantaneous expected return  $\mu^{\kappa}$  regardless of the agent's plan. For example, under the linear budget equation (Example 1), we have  $\mu^{\kappa} = r + \kappa' \mu^{R}$ .

Defining the zero-wealth constraint set, aggregator, and portfolio and consumption processes

$$K^{0} = \{\alpha : (0, \alpha) \in K\},\$$
$$f^{0}(\omega, t, \alpha) = f(\omega, t, 0, \alpha),\$$
$$\phi_{t}^{0} = \phi_{t} - W_{t}\kappa,\$$
$$c_{t}^{0} = c_{t} - W_{t}\frac{\gamma_{t}}{\Gamma_{t}}\tag{39}$$

the budget equation  $(7)$  is equivalent to

$$\begin{aligned} \mathrm{d}W_t &= W_t \frac{\mathrm{d}\Gamma_t}{\Gamma_t} + (f^0(t, \phi_t^0) + e_t - c_t^0) \mathrm{d}t \\ &+ \phi_t^{0'} \sigma_t^{R'} \mathrm{d}B_t, \\ c_T^0 &= e_T, \quad \phi_t^0 \in K^0 \end{aligned} \tag{40}$$

At the optimum, the quasi-linearity of utility and markets implies that there are two components to consumption and trading. The pair  $(c^0, \phi^0)$  depends on the investment opportunity set and the endowment, but is independent of  $W$ . All incremental financial wealth is invested in the portfolio  $\kappa$ , and the resulting dividend stream rate  $\gamma$  is consumed; therefore, (c –  $c^0, \phi - \phi^0$ ) depend only on W and the dividend yield  $\gamma/\Gamma$ . Utility and marginal utility of wealth processes satisfy

$$U_t = \frac{1}{\Gamma_t} (Y_t + W_t), \quad \lambda_t = \frac{1}{\Gamma_t}$$
(41)

where  $(Y, \phi^0)$  is determined by a constrained backward SDE, given below, that is independent of financial wealth.

Defining the superdifferential notation  $\partial f^0$  analogously to  $\partial f$ , the state-price density condition  $(\zeta, \sigma^{R'}n) \in \partial f(W, \phi)$  is equivalent to  $\zeta = \mu^{\kappa}$  - $\kappa' \sigma^{R'} \eta$  and  $\sigma^{R'} \eta \in \partial f^0(\phi^0)$ . Defining the inverse and dual functions  $\mathcal{X}, G^* : \Omega \times [0, T] \times \mathbb{R}^{d+1} \to \mathbb{R}$ bv

$$G_{x}(\omega, t, \mathcal{X}(\omega, t, y, \Sigma), \Sigma) = y,$$
  
$$G^{*}(\omega, t, y, \Sigma) = G(\omega, t, \mathcal{X}(\omega, t, y, \Sigma), \Sigma)$$
  
$$- y\mathcal{X}(\omega, t, y, \Sigma)$$
  
(42)

the processes  $(Y, \sigma^Y, \phi^0)$  satisfy

$$\begin{split} \mathrm{d}Y &= -\left(e - Y\mu^{\kappa} + f^{0}(\phi^{0}) + \Gamma G^{*}(\delta, \Sigma) \right. \\ &\quad - \Gamma \kappa' \sigma^{R'} \Sigma) \mathrm{d}t + \sigma^{Y'} \mathrm{d}B, \quad Y_{T} = e_{T} \\ \Sigma &= \frac{\sigma^{Y} + (\phi^{0} - \kappa Y)' \sigma^{R}}{\Gamma}, \\ &\quad - \sigma^{R'} (G_{\Sigma} - \sigma^{R} \kappa) \in \partial f^{0}(\phi^{0}), \quad \phi^{0} \in K^{0} \end{split} \tag{43}$$

Given the solution  $(Y, \sigma^Y, \phi^0)$  and sufficient regularity, the optimal wealth-independent component of consumption is

$$c_t^0 = \frac{\gamma_t}{\Gamma_t} Y_t + \gamma_t \mathcal{X}\left(t, \frac{\gamma_t}{\Gamma_t}, \Sigma_t\right) \quad \text{and} \quad c_T^0 = e_T \tag{44}$$

Substituting  $(c^0, \phi^0)$  into the budget equation (40), the optimal plan is  $(c^0 + W\gamma/\Gamma, W, \phi^0 + W\kappa)$ .

## Acknowledgments

I am grateful to Costis Skiadas for many fruitful years of joint research, on which this article is based.

## **End Notes**

a*.* See also [25], which develops the discrete-time counterpart of (5), and [24], which develops the continuous-time formulations of other notions of ambiguity aversion.

b*.* We define arbitrage in the constrained case as a feasible incremental cash flow (given the current portfolio of the agent) that is nonnegative and nonzero.

c*.* With some additional mild technical conditions, Schroder and Skiadas [20] show the necessity of the state-price characterization for the market settings in the scale and translation-invariant classes, which are discussed below in the text.

## **References**

- [1] Anderson, E., Hansen, L. & Sargent, T. (2000). *Robustness, Detection and the Price of Risk*, working paper, Department of Economics, University of Chicago.
- [2] Chen, Z. & Epstein, L. (2002). Ambiguity, risk, and asset returns in continuous time, *Econometrica* **70**, 1403–1443.
- [3] Chew, S.H. (1983). A generalization of the Quasi-linear mean with applications to the measurement of inequality and decision theory resolving the allais paradox, *Econometrica* **51**, 1065–1092.
- [4] Cuoco, D. & Cvitanic, J. (1998). Optimal consump- ´ tion choices for a large investor, *Journal of Economic Dynamics and Control* **22**, 401–436.
- [5] Cuoco, D. & Liu, H. (2000). A martingale characterization of consumption choices and hedging costs with margin requirements, *Mathematical Finance* **10**, 355–385.
- [6] Cvitanic, J. & Karatzas, I. (1992). Convex duality ´ in constrained portfolio optimization, *The Annals of Applied Probability* **2**, 767–818.
- [7] Dekel, E. (1986). An axiomatic characterization of preferences under uncertainty: weakening the independence axiom, *Journal of Economic Theory* **40**, 304–318.
- [8] Duffie, D. & Epstein, L.G. (1992). Stochastic differential utility, *Econometrica* **60**, 353–394.
- [9] Duffie, D. & Skiadas, C. (1994). Continuous-time security pricing: a utility gradient approach, *Journal of Mathematical Economics* **23**, 107–131.
- [10] El Karoui, N., Peng, S. & Quenez, M.-C. (2001). A dynamic maximum principle for the optimization of recursive utilities under constraints, *Annals of Applied Probability* **11**, 664–693.
- [11] Epstein, L.G. & Zin, S.E. (1989). Substitution, risk aversion, and the temporal behavior of consumption and asset returns: a theoretical framework, *Econometrica* **57**, 937–969.
- [12] Epstein, L.G. & Zin, S.E. (1991). Substitution, risk aversion, and the temporal behavior of consumption

and asset returns: an empirical analysis, *The Journal of Political Economy* **99**, 263–286.

- [13] Hansen, L., Sargent, T., Turmuhambetova, G. & Williams, N. (2001). *Robustness and Uncertainty Aversion*, working paper, Department of Economics, University of Chicago.
- [14] Kreps, D. & Porteus, E. (1978). Temporal resolution of uncertainty and dynamic choice theory, *Econometrica* **46**, 185–200.
- [15] Lazrak, A. & Quenez, M.C. (2003). A generalized stochastic differential utility, *Mathematics of Operations Research* **28**, 154–180.
- [16] Liu, J. & Longstaff, F.A. (2004). Losing money on arbitrage: optimal dynamic portfolio choice in markets with arbitrage opportunities, *Review of Financial Studies* **17**(3), 611–641.
- [17] Maenhout, P. (1999). *Robust Portfolio Rules and Asset Pricing*, working paper, INSEAD.
- [18] Schroder, M. & Skiadas, C. (2003). Optimal lifetime consumption-portfolio strategies under trading constraints and generalized recursive preferences, *Stochastic Processes and Their Applications* **108**, 155–202.
- [19] Schroder, M. & Skiadas, C. (2005). Lifetime consumption-portfolio choice under trading constraints and nontradeable income, *Stochastic Processes and their Applications* **115**, 1–30.
- [20] Schroder, M. & Skiadas, C. (2008). Optimality and state pricing in constrained financial markets with recursive utility under continuous and discontinuous information, *Mathematical Finance* **18**, 199–238.
- [21] Skiadas, C. (1992). *Advances in the Theory of Choice and Asset Pricing*, Ph.D. Thesis, Stanford University.
- [22] Skiadas, C. (2003). Robust control and recursive utility, *Finance and Stochastics* **7**, 475–489.
- [23] Skiadas, C. (2008). Dynamic portfolio choice and risk aversion, in *Handbooks in OR & MS*, J.R. Birge & V. Linetsky, eds, Elsevier, Vol. 15, Chapter 19, pp. 789–843.
- [24] Skiadas, C. (2008). *Smooth Ambiguity Aversion Toward Small Risks and Continuous-Time Recursive Utility*, working paper, Kellogg School of Management, Northwestern University.
- [25] Skiadas, C. (2009). *Asset Pricing Theory*, Princeton University Press, Princeton, NJ.

## **Related Articles**

**Backward Stochastic Differential Equations**; **Utility Function**; **Utility Theory: Historical Perspectives**.

MARK SCHRODER