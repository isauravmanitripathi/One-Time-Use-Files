<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
 </head>
 <body>
  <h1>
   <b>
    Weighted Variance Swap
   </b>
  </h1>
  <p block-type="TextInlineMath">
   Let the underlying process
   <i>
    Y
   </i>
   be a semimartingale taking values in an interval
   <i>
    I
   </i>
   . Let
   <i>
    ϕ
   </i>
   :
   <i>
    I
   </i>
   →  be a difference of convex functions, and let
   <i>
    X
   </i>
   :=
   <i>
    ϕ(Y )
   </i>
   . A typical application takes
   <i>
    Y
   </i>
   to be a positive price process and
   <i>
    ϕ(y)
   </i>
   = log
   <i>
    y
   </i>
   for
   <i>
    y
   </i>
   ∈
   <i>
    I
   </i>
   =
   <i>
    (
   </i>
   0
   <i>
    ,
   </i>
   ∞
   <i>
    )
   </i>
   .
  </p>
  <p block-type="TextInlineMath">
   Then (the floating leg of) a forward-starting
   <i>
    weighted variance swap
   </i>
   or
   <i>
    generalized variance swap
   </i>
   on
   <i>
    ϕ(Y )
   </i>
   (shortened to "on
   <i>
    Y
   </i>
   " if the
   <i>
    ϕ
   </i>
   is understood), with
   <i>
    weight
   </i>
   process
   <i>
    wt
   </i>
   , forward-start time
   <i>
    θ
   </i>
   , and expiry
   <i>
    T
   </i>
   , is defined to pay, at a fixed time
   <i>
    T
   </i>
   pay ≥
   <i>
    T &gt;θ
   </i>
   ≥ 0,
  </p>
  <p block-type="Equation">
   <math display="block">
    \int_{\theta}^{T} w_t \, \mathrm{d}[X]_t \tag{1}
   </math>
  </p>
  <p block-type="TextInlineMath">
   where [·] denotes quadratic variation. In the case that
   <i>
    θ
   </i>
   = 0, the trade date, we have a spot-starting weighted variance swap. The basic cases of weights take the form
   <i>
    wt
   </i>
   =
   <i>
    w(Yt)
   </i>
   , for a measurable function
   <i>
    w
   </i>
   :
   <i>
    I
   </i>
   → [0
   <i>
    ,
   </i>
   ∞
   <i>
    )
   </i>
   , such as the following.
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     1. The weight
     <i>
      w(y)
     </i>
     = 1 defines a
     <i>
      variance swap
     </i>
     (
     <i>
      see
     </i>
     <b>
      Variance Swap
     </b>
     ).
    </li>
    <li block-type="ListItem">
     2. The weight
     <i>
      w(y)
     </i>
     = 11
     <i>
      y
     </i>
     ∈
     <i>
      C
     </i>
     , the indicator function of some interval
     <i>
      C
     </i>
     , defines a
     <i>
      corridor variance swap
     </i>
     (
     <i>
      see
     </i>
     <b>
      Corridor Variance Swap
     </b>
     ) with corridor
     <i>
      C
     </i>
     . For example, a corridor of the form
     <i>
      C
     </i>
     =
     <i>
      (
     </i>
     0
     <i>
      ,H)
     </i>
     produces a
     <i>
      down
     </i>
     variance swap.
    </li>
    <li block-type="ListItem">
     3. The weight
     <i>
      w(y)
     </i>
     =
     <i>
      y/Y
     </i>
     <sup>
      0
     </sup>
     defines a
     <i>
      gamma swap
     </i>
     (
     <i>
      see
     </i>
     <b>
      Gamma Swap
     </b>
     ).
    </li>
   </ul>
  </p>
  <h2>
   <b>
    Model-free Replication and Valuation
   </b>
  </h2>
  <p block-type="TextInlineMath">
   Assuming a deterministic interest rate
   <i>
    rt
   </i>
   , let
   <i>
    Zt
   </i>
   be the time-
   <i>
    t
   </i>
   price of a bond that pays 1 at time
   <i>
    T
   </i>
   pay. Assume that
   <i>
    Y
   </i>
   is the continuous price process of a share that pays continuously a deterministic proportional dividend
   <i>
    qt
   </i>
   . Let
  </p>
  <p block-type="Equation">
   <math display="block">
    Z_{t} = \exp\left(-\int_{t}^{T_{\text{pay}}} r_{u} \, \mathrm{d}u\right) \quad \text{and}
   </math>
   <math display="block">
    Q_{t} := \exp\left(\int_{0}^{t} q_{u} \, \mathrm{d}u\right) \tag{2}
   </math>
  </p>
  <p block-type="Text">
   so the share price with reinvested dividends is
   <i>
    YtQt
   </i>
   . Then the payoff
  </p>
  <p block-type="Equation">
   <math display="block">
    \int_{\theta}^{T} w(Y_t) \, \mathrm{d}[X]_t \tag{3}
   </math>
  </p>
  <p block-type="TextInlineMath">
   admits a model-independent replication strategy, which holds European options statically and trades the underlying shares dynamically. Indeed, let
   <i>
    λ
   </i>
   :
   <i>
    I
   </i>
   →  be a difference of convex functions, let
   <i>
    λy
   </i>
   denote its left-hand derivative, and assume that its second derivative in the distributional sense has a signed density, denoted
   <i>
    λyy
   </i>
   , which satisfies for all
   <i>
    y
   </i>
   ∈
   <i>
    I
   </i>
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda_{yy}(y) = 2\varphi_y^2(y)w(y) \tag{4}
   </math>
  </p>
  <p block-type="Text">
   where
   <i>
    ϕy
   </i>
   denotes the left-hand derivative of
   <i>
    ϕ
   </i>
   . Then
  </p>
  <p block-type="Equation">
   <math display="block">
    \begin{split} \int_{\theta}^{T} w(Y_{t}) \, \mathrm{d}[X]_{t} \\ &amp;= \lambda(Y_{T}) - \lambda(Y_{\theta}) - \int_{\theta}^{T} \lambda_{y}(Y_{t}) \, \mathrm{d}Y_{t} \qquad (5) \\ &amp;= \lambda(Y_{T}) - \lambda(Y_{\theta}) + \int_{\theta}^{T} (q_{t} - r_{t}) \lambda_{y}(Y_{t}) Y_{t} \, \mathrm{d}t \\ &amp;- \int_{\theta}^{T} \lambda_{y}(Y_{t}) \frac{Z_{t}}{Q_{t}} \, \mathrm{d}(Y_{t} Q_{t}/Z_{t}) \qquad (6) \end{split}
   </math>
  </p>
  <p block-type="TextInlineMath">
   where equation (5) is by a proposition in [2] that slightly extends [1], and equation (6) is by Ito's rule. So the following self-financing strategy replicates (and hence prices) the payoff (3). Hold statically a claim that pays at time
   <i>
    T
   </i>
   pay
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(Y_T) - \lambda(Y_\theta) + \int_\theta^T (q_\tau - r_\tau) \lambda_y(Y_\tau) Y_\tau \, \mathrm{d}\tau \quad (7\text{a})
   </math>
  </p>
  <p block-type="Text">
   and trade shares dynamically, holding at each time
   <i>
    t
   </i>
   ∈
   <i>
    (θ , T )
   </i>
  </p>
  <p block-type="Equation">
   <math display="block">
    -\lambda_{y}(Y_{t})Z_{t} \quad \text{shares} \tag{7b}
   </math>
  </p>
  <p block-type="TextInlineMath" class="has-continuation">
   and a bond position that finances the shares and accumulates the trading gains or losses. Hence, the payoff (3) has time-0 value equal to that of the replicating claim (7a), which is synthesizable from Europeans with expiries in [
   <i>
    θ,T
   </i>
   ]. Indeed, for a put/call separator
   <i>
    κ
   </i>
   (such as
   <i>
    κ
   </i>
   =
   <i>
    Y
   </i>
   0), if
   <i>
    λ(κ)
   </i>
   =
   <i>
    λy (κ)
   </i>
   = 0, then
  </p>
  <p block-type="TextInlineMath">
   each
   <i>
    λ
   </i>
   claim decomposes into puts/calls at all strikes
   <i>
    K
   </i>
   , with quantities 2
   <i>
    ϕ
   </i>
   <sup>
    2
   </sup>
   <i>
    <sup>
     y
    </sup>
    (K)w(K)
   </i>
   d
   <i>
    K
   </i>
   :
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(y) = \int_{I} 2\varphi_{y}^{2}(K)w(K)\text{Van}(y, K) \, \mathrm{d}K \qquad (8)
   </math>
  </p>
  <p block-type="TextInlineMath">
   where Van
   <i>
    (y, K)
   </i>
   :=
   <i>
    (K
   </i>
   −
   <i>
    y)
   </i>
   <sup>
    +
   </sup>
   11
   <i>
    K&lt;κ
   </i>
   +
   <i>
    (y
   </i>
   −
   <i>
    K)
   </i>
   <sup>
    +
   </sup>
   11
   <i>
    K&gt;κ
   </i>
   denotes the vanilla put or call payoff. For put/call decompositions of general European payoffs, see [1].
  </p>
  <h2>
   <b>
    Futures-dependent Weights
   </b>
  </h2>
  <p block-type="Text">
   In equation (3), the weight is a function of spot
   <i>
    Yt
   </i>
   . The alternative payoff specification
  </p>
  <p block-type="Equation">
   <math display="block">
    \int_{\theta}^{T} w(Y_{t}Q_{t}/Z_{t}) \, \mathrm{d}[X]_{t} \tag{9}
   </math>
  </p>
  <p block-type="TextInlineMath">
   makes
   <i>
    wt
   </i>
   a function of the
   <i>
    futures
   </i>
   price (a constant times
   <i>
    YtQt /Zt
   </i>
   ).
  </p>
  <p block-type="TextInlineMath">
   In the case
   <i>
    ϕ
   </i>
   = log, we have [
   <i>
    X
   </i>
   ] = [log
   <i>
    Y
   </i>
   ] = [log
   <i>
    (YQ/Z)
   </i>
   ]; hence
  </p>
  <p block-type="Equation">
   <math display="block">
    \begin{split} \int_{\theta}^{T} w \big( Y_{t} Q_{t} / Z_{t} \big) \, \mathrm{d}[X]_{t} \\ &amp;= \lambda \Big( \frac{Y_{T} Q_{T}}{Z_{T}} \Big) - \lambda \Big( \frac{Y_{\theta} Q_{\theta}}{Z_{\theta}} \Big) \\ &amp;- \int_{\theta}^{T} \lambda_{y} (Y_{t} Q_{t} / Z_{t}) \, \mathrm{d}(Y_{t} Q_{t} / Z_{t}) \end{split}
   </math>
  </p>
  <p block-type="TextInlineMath">
   for
   <i>
    λ
   </i>
   satisfying equation (4). So the alternative payoff (9) admits replication as follows: hold statically a claim that pays at time
   <i>
    T
   </i>
   pay
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(Y_T Q_T / Z_T) - \lambda(Y_\theta Q_\theta / Z_\theta) \tag{10a}
   </math>
  </p>
  <p block-type="TextInlineMath">
   and trade shares dynamically, holding at each time
   <i>
    t
   </i>
   ∈
   <i>
    (θ , T )
   </i>
  </p>
  <p block-type="Equation">
   <math display="block">
    -\lambda_{y}(Y_{t}Q_{t}/Z_{t})Q_{t} \quad \text{shares} \qquad (10b)
   </math>
  </p>
  <p block-type="Text">
   and a bond position that finances the shares and accumulates the trading gains or losses. Thus, the payoffs (9) and (10a) have equal values at time 0.
  </p>
  <p block-type="TextInlineMath" class="has-continuation">
   In special cases (such as
   <i>
    w
   </i>
   = 1 or
   <i>
    r
   </i>
   =
   <i>
    q
   </i>
   = 0), the spot-dependent (3) and futures-dependent (9) weight specifications are equivalent. In general, the spotdependent weighting is harder to replicate, as it requires a continuum of expiries in equation (7a),
  </p>
  <p block-type="Text">
   unlike equation (10a). The spot-dependent weighting is, however, the more common specification and is assumed in remainder of this article.
  </p>
  <h2>
   <b>
    Examples
   </b>
  </h2>
  <p block-type="TextInlineMath">
   Returning to the previously specified examples of weights
   <i>
    w(Yt)
   </i>
   , we express the replication payoff
   <i>
    λ
   </i>
   in a compact formula, and also expanded in terms of vanilla payoffs according to equation (8). We take
   <i>
    ϕ(y)
   </i>
   = log
   <i>
    y
   </i>
   unless otherwise stated.
  </p>
  <p block-type="Text">
   •
   <i>
    Variance swap
   </i>
   : Equation (4) has solution
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(y) = -2 \log(y/\kappa) + 2y/\kappa - 2
   </math>
   <math display="block">
    = \int_0^\infty \frac{2}{K^2} \text{Van}(y, K) \, \text{d}K \qquad (11)
   </math>
  </p>
  <p block-type="Text">
   •
   <i>
    Arithmetic variance swap
   </i>
   : For
   <i>
    ϕ(y)
   </i>
   =
   <i>
    y
   </i>
   , equation (4) has solution
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(y) = (y - \kappa)^2 = \int_0^\infty 2 \operatorname{Van}(y, K) \, dK \quad (12)
   </math>
  </p>
  <p block-type="Text">
   •
   <i>
    Corridor variance swap
   </i>
   : Equation (4) has solution
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(y) = \int_{K \in C} \frac{2}{K^2} \operatorname{Van}(y, K) \, \mathrm{d}K \tag{13}
   </math>
  </p>
  <p block-type="Text">
   •
   <i>
    Gamma swap
   </i>
   : Equation (4) has solution
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(y) = \frac{2}{Y_0} \Big[ y \log(y/\kappa) - y + \kappa \Big]
   </math>
   <math display="block">
    = \int_0^\infty \frac{2}{Y_0 K} \text{Van}(y, K) \, \mathrm{d}K \qquad (14)
   </math>
  </p>
  <p block-type="TextInlineMath">
   In all cases, the strategy (7) replicates the desired contract. In the case of a variance swap, the strategy (10) also replicates it, because
   <i>
    w(Y )
   </i>
   = 1 =
   <i>
    w(YQ/Z)
   </i>
   .
  </p>
  <h2>
   <b>
    Discrete Dividends
   </b>
  </h2>
  <p block-type="TextInlineMath">
   Assume that at the fixed times
   <i>
    tm
   </i>
   where
   <i>
    θ
   </i>
   =
   <i>
    t
   </i>
   <sup>
    0
   </sup>
   <i>
    &lt; t
   </i>
   <sup>
    1
   </sup>
   <i>
    &lt;
   </i>
   ···
   <i>
    &lt; tM
   </i>
   =
   <i>
    T
   </i>
   , the share price jumps to
   <i>
    Ytm
   </i>
   =
   <i>
    Ytm
   </i>
   <sup>
    −
   </sup>
   −
   <i>
    δm(Ytm
   </i>
   −
   <i>
    )
   </i>
   , where each discrete dividend is given by a function
   <i>
    δm
   </i>
   of prejump price. In this case, the dividend-adjusted weighted variance swap can be defined to pay at time
   <i>
    T
   </i>
   pay
  </p>
  <p block-type="Equation">
   <math display="block">
    \sum_{m=1}^{M} \int_{t_{m-1}+}^{t_{m}-} w(Y_t) \, \mathrm{d}[X]_t \tag{15}
   </math>
  </p>
  <p block-type="TextInlineMath">
   If the function
   <math display="inline">
    y \mapsto y - \delta_m(y)
   </math>
   has an inverse
   <math display="inline">
    f_m: I \to I
   </math>
   , and if Y is still continuous on each
   <math display="inline">
    [t_{m-1}, t_m)
   </math>
   , then each term in equation (15) can be constructed via equation (7), together with the relation
   <math display="inline">
    \lambda(Y_{t_{m-}}) = \lambda(f_m(Y_{t_m}))
   </math>
   . Specifically, the
   <i>
    m
   </i>
   th term admits replication by holding statically a claim that pays at time
   <math display="inline">
    T_{\text{pay}}
   </math>
  </p>
  <p block-type="Equation">
   <math display="block">
    \lambda(f_m(Y_{t_m})) - \lambda(Y_{t_{m-1}})
   </math>
   <br/>
   +
   <math display="block">
    \int_{t_{m-1}}^{t_m} (q_\tau - r_\tau) \lambda_y(Y_\tau) Y_\tau \ d\tau \qquad (16)
   </math>
  </p>
  <p block-type="TextInlineMath">
   and holding dynamically
   <math display="inline">
    -\lambda_{\nu}(Y_t)Z_t
   </math>
   shares, at each time
   <math display="inline">
    t \in (t_{m-1}, t_m)
   </math>
   .
  </p>
  <h4>
   <b>
    Contract Specifications in Practice
   </b>
  </h4>
  <p block-type="Text">
   In practice, weighted variance swap transactions are forward settled; no payment occurs at time 0, and at time
   <math display="inline">
    T_{\text{pay}}
   </math>
   the party long the swap receives the total payment
  </p>
  <p block-type="Equation">
   <math display="block">
    Notional \times (Floating - Fixed) \tag{17}
   </math>
  </p>
  <p block-type="TextInlineMath">
   where "fixed" (also known as the strike), expressed in units of annualized variance, is the price contracted at time 0 for time-
   <math display="inline">
    T_{\text{pay}}
   </math>
   delivery of "floating", an annualized discretization of equation (15) that monitors
   <math display="inline">
    Y
   </math>
   , typically daily, for
   <math display="inline">
    N
   </math>
   periods. In the usual case of
   <math display="inline">
    \varphi = \log
   </math>
   , this results in a specification
  </p>
  <p block-type="TextInlineMath">
   <math display="inline">
    Floating := Annualization
   </math>
  </p>
  <p block-type="Equation">
   <math display="block">
    \times \sum_{n=1}^{N} w(Y_n) \left( \log \frac{Y_n + D_n}{Y_{n-1}} \right)^2 \quad (18)
   </math>
  </p>
  <p block-type="Text">
   where
   <math display="inline">
    D_n
   </math>
   denotes the discrete dividend payment, if any, of the
   <math display="inline">
    n
   </math>
   th period. Both here and in the theoretical form (15), no adjustment is made for any dividends deemed to be continuous (for example, index variance contracts typically do not adjust for index dividends; see [3]).
  </p>
  <p block-type="Text">
   In some contracts—for example, single-stock (down-)variance—the risk to the variance seller that
   <math display="inline">
    Y
   </math>
   crashes is limited by imposing a cap on the payoff. Hence,
  </p>
  <p block-type="Equation">
   <math display="block">
    Notional \times \Big( \min(Floating, Cap \times Fixed) - Fixed \Big)
   </math>
   (19)
  </p>
  <p block-type="Text">
   replaces equation (17), where "Cap" is an agreed constant, such as the square of
   <math display="inline">
    2.5
   </math>
   .
  </p>
  <h2>
   References
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     [1] Carr, P. &amp; Madan, D. (1998). Towards a theory of volatility trading, in Volatility, R. Jarrow, ed, Risk Publications, рр. 417-427.
    </li>
    <li block-type="ListItem">
     [2] Carr, P. &amp; Lee, R. (2009).
     <i>
      Hedging Variance Options on
     </i>
     Continuous Semimartingales, Forthcoming in Finance and Stochastics.
    </li>
    <li block-type="ListItem">
     [3] Overhaus, M., Bermúdez, A., Buehler, H., Ferraris, A., Jordinson, C. &amp; Lamnouar, A. (2007). Equity Hybrid Derivatives, John Wiley &amp; Sons.
    </li>
   </ul>
  </p>
  <h4>
   <b>
    Related Articles
   </b>
  </h4>
  <p block-type="Text">
   Corridor Variance Swap; Gamma Swap; Variance Swap.
  </p>
  <p block-type="Text">
   ROGER LEE
  </p>
 </body>
</html>
