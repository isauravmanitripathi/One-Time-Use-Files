<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
 </head>
 <body>
  <h1>
   <b>
    Uncertain Volatility Model
   </b>
  </h1>
  <h2>
   <b>
    Black–Scholes and Realized Volatility
   </b>
  </h2>
  <p block-type="Text">
   What happens when a trader uses the Black–Scholes ((BS) in the sequel) formula to dynamically hedge a call option at a given constant volatility while the realized volatility is not constant?
  </p>
  <p block-type="Text">
   It is not difficult to show that the answer is the following: if the realized volatility is lower than the managing volatility, the corresponding profit and loss (P&amp;L) will be nonnegative. Indeed, a simple, yet, clever application of Ito's formula shows us that ˆ the instantaneous P&amp;L of being short a delta-hedged option reads
  </p>
  <p block-type="Equation">
   <math display="block">
    P \&amp; L_t = \frac{1}{2} \Gamma S_t^2 \left[ \sigma_t^2 dt - \left( \frac{dS_t}{S_t} \right)^2 \right] \qquad (1)
   </math>
  </p>
  <p block-type="TextInlineMath">
   where  is the gamma of the option (the second derivative with respect to the underlying, which is positive for a call option), and
   <i>
    σt
   </i>
   the spot volatility, for example, the volatility at which the option was sold and  d
   <i>
    St St
   </i>
   2 represents the realized variance over the period [
   <i>
    t,t
   </i>
   + d
   <i>
    t
   </i>
   ]. Note that this holds without any assumption on the realized volatility, which will certainly turn out to be nonconstant. This result is fundamental in practice: it allows traders to work with neither exact knowledge of the behavior of the volatility nor a more complex toolbox than the plain BS formula; an upper bound of the realized volatility is enough to grant a profit (conversely, a lower bound for option buyers). This way of handling the realized volatility with the BS formula is of historical importance in the option market. El Karoui, Jeanblanc, and Shreve have formalized it masterfully in [5].
  </p>
  <h1>
   <b>
    Superhedging and the Uncertain Volatility Model (UVM)
   </b>
  </h1>
  <h2>
   <i>
    The UVM Framework
   </i>
  </h2>
  <p block-type="Text" class="has-continuation">
   Assume that you perform the previous strategy. You are certainly not alone in the market, and you wish you have the lowest possible selling price compatible with your risk aversion. In practice, on the derivatives desk (this is a big difference with the insurance
  </p>
  <p block-type="Text">
   world where the risk is distributed among a large enough number of buyers), the risk aversion is total, meaning that your managing policy will aim at yielding a nonnegative P&amp;L whatever the realized path. This approach is what is called the superhedging strategy (or superstrategy) approach to derivative pricing. Of course, the larger the set of the underlying scenarios (or paths) for which you want to have the superhedging property (
   <i>
    see
   </i>
   <b>
    Superhedging
   </b>
   ), the higher the initial selling price. The first set that comes to mind is the set of paths associated with an unknown volatility, say between two boundary values
   <i>
    σ
   </i>
   min and
   <i>
    σ
   </i>
   max. In other words, we look for the cheapest price at which we can sell and manage an option without any assumption on the volatility except that it lies in the [
   <i>
    σ
   </i>
   min
   <i>
    , σ
   </i>
   max] range. This framework is the uncertain volatility model (UVM) introduced by Avellaneda
   <i>
    et al.
   </i>
   [2].
  </p>
  <p block-type="TextInlineMath">
   If you take a call option (or more generally a European option with convex payoff), the BS price at volatility
   <i>
    σ
   </i>
   max is a good candidate. Indeed, it yields a superhedging strategy by result (1). And should the realized volatility be constantly
   <i>
    σ
   </i>
   max, then your P&amp;L will be 0. It is easy to conclude from this that the BS
   <i>
    σ
   </i>
   max price is the UVM selling price for an option with a convex payoff.
  </p>
  <p block-type="Text">
   Now very often traders use strategies (butterflies, callspreads, etc.) which are not convex any longer. It is not at all easy to find a superstrategy in such cases. There is one exception; if you hedge at the selling time and do not rebalance your hedge before maturity, the cheapest price associated to such a strategy will be the value at the initial underlying value of the concave envelope of the payoff function. It is easy to see that this value corresponds to the total uncertainty case, or to the [0
   <i>
    ,
   </i>
   ∞] case in the UVM model. For a call option it will be the value of the underlying.
  </p>
  <h2>
   <i>
    Black–Scholes–Barenblatt Equation
   </i>
  </h2>
  <p block-type="Text">
   There come into play the seminal work [2] and independently [7]: Going back to equation (1), we are looking for a model with the property that the managing volatility is
   <i>
    σ
   </i>
   min when the gamma is nonnegative, and
   <i>
    σ
   </i>
   max in the converse situation. Should such a model exist, it will yield an optimal solution to the superhedging problem.
  </p>
  <p block-type="Text" class="has-continuation">
   An easy way to approximate the optimal solution is to consider a tree (a trinomial tree, for instance) where the dependence upon the volatility lies in
  </p>
  <p block-type="Text">
   the node probabilities and not in the tree grid. In the classical backward pricing scheme one can then choose the managing volatility according to the local convexity (since it is a trinomial tree, each node has three offshoot and so a convexity information) of the immediately forward price. Of course, it is not the convexity of the current price since we are calculating it, but the related error of replacing the current convexity by the forward one will certainly go to zero when the time step goes to zero.
  </p>
  <p block-type="Text">
   The related continuous-time object is the Black-Scholes partial differential equation (PDE) where the second-order term is replaced by the following nonlinear one
  </p>
  <p block-type="Equation">
   <math display="block">
    \frac{1}{2}S_t^2\left(\sigma_{\max}^2\Gamma^+-\sigma_{\min}^2\Gamma^-\right)
   </math>
  </p>
  <p block-type="TextInlineMath">
   where, as usual,
   <math display="inline">
    x^+
   </math>
   and
   <math display="inline">
    x^-
   </math>
   denote the positive and negative parts. This PDE has been named Black-Scholes-Barenblatt since it looks like the Barenblatt PDE occurring in porosity theory. More precisely, in case of no arbitrage, assume that the stock price dynamics satisfy
   <math display="inline">
    dS_t = S_t (r dt + \sigma_t dW_t)
   </math>
   , where
   <math display="inline">
    W_t
   </math>
   is a standard Brownian motion and r is the risk-free interest rate. This is valid under the class
   <math display="inline">
    \mathcal{P}
   </math>
   of all the probability measures such that
   <math display="inline">
    \sigma_{\min} \leq
   </math>
   <math display="inline">
    \sigma_t \leq \sigma_{\text{max}}
   </math>
   . Let
   <math display="inline">
    \Pi_t
   </math>
   denote the value of a derivative at time t written on
   <math display="inline">
    S_t
   </math>
   with maturity T and final payoff
   <math display="inline">
    \Phi(S_T)
   </math>
   ; then at any time
   <math display="inline">
    0 &lt; t &lt; T
   </math>
   , we must have
   <math display="inline">
    W^-(t, S_t) \leq \Pi_t \leq W^+(t, S_t)
   </math>
   where
  </p>
  <p block-type="Equation">
   <math display="block">
    W^{-}(t, S_{t}) = \inf_{P \in \mathcal{P}} \mathbb{E}_{t}^{P} \left[ e^{-r(T-t)} \Phi(S_{T}) \right]
   </math>
   <br/>
   <math display="block">
    W^{+}(t, S_{t}) = \sup_{P \in \mathcal{P}} \mathbb{E}_{t}^{P} \left[ e^{-r(T-t)} \Phi(S_{T}) \right] \qquad (2)
   </math>
  </p>
  <p block-type="TextInlineMath">
   The two bounds satisfy the following nonlinear PDE, called the
   <i>
    Black–Scholes–Barenblatt equation
   </i>
   (which reduces to the classical BS one in the case
   <math display="inline">
    \sigma_{\min} = \sigma_t = \sigma_{\max}
   </math>
   ):
  </p>
  <p block-type="Equation">
   <math display="block">
    \frac{\partial W^{\pm}}{\partial t} + r \left( \frac{\partial W^{\pm}}{\partial S} S - W^{\pm} \right) + \frac{1}{2} \Sigma \left( \frac{\partial^2 W^{\pm}}{\partial S^2} \right) S^2 \frac{\partial^2 W^{\pm}}{\partial S^2} = 0 \qquad (3)
   </math>
  </p>
  <p block-type="Text">
   with the terminal condition
  </p>
  <p block-type="Equation">
   <math display="block">
    W^{\pm}(S,T) = \Phi(S_T) \tag{4}
   </math>
  </p>
  <p block-type="Text">
   where
  </p>
  <p block-type="Equation">
   <math display="block">
    \Sigma \left( \frac{\partial^2 W^+}{\partial S^2} \right) = \begin{cases} \sigma_{\text{max}}^2 &amp; \text{if } \frac{\partial^2 W^+}{\partial S^2} \ge 0\\ \sigma_{\text{min}}^2 &amp; \text{if } \frac{\partial^2 W^+}{\partial S^2} &lt; 0 \end{cases} \tag{5}
   </math>
  </p>
  <p block-type="Text">
   and
  </p>
  <p block-type="Equation">
   <math display="block">
    \Sigma \left( \frac{\partial^2 W^-}{\partial S^2} \right) = \begin{cases} \sigma_{\text{max}}^2 &amp; \text{if } \frac{\partial^2 W^-}{\partial S^2} \le 0\\ \sigma_{\text{min}}^2 &amp; \text{if } \frac{\partial^2 W^-}{\partial S^2} &gt; 0 \end{cases} \tag{6}
   </math>
  </p>
  <p block-type="TextInlineMath">
   Observe that in case
   <math display="inline">
    \Phi
   </math>
   is convex, the BS price at volatility
   <math display="inline">
    \sigma_{\text{max}}
   </math>
   is convex for any time t, so that it solves the Black-Scholes-Barenblatt equation. Conversely, if
   <math display="inline">
    \Phi
   </math>
   is concave, so is its BS price at volatility
   <math display="inline">
    \sigma_{\text{max}}
   </math>
   for any time
   <i>
    t
   </i>
   , which yields the unique solution to the Black-Scholes-Barenblatt equation.
  </p>
  <h4>
   Superstrategies and Stochastic Control
  </h4>
  <p block-type="Text">
   Note that this PDE is also a classical Hamilton-Jacobi-Bellman equation occurring in stochastic control theory. Indeed a related object of interest is the supremum of the risk-neutral prices over all the dynamics of volatility that satisfy the range property:
  </p>
  <p block-type="Equation">
   <math display="block">
    \sup_{P\in\mathcal{P}}\mathbb{E}^P f
   </math>
  </p>
  <p block-type="TextInlineMath">
   where
   <math display="inline">
    \mathcal{P}
   </math>
   is the set of risk-neutral probabilities, each of which corresponds to a volatility process with value at each time in
   <math display="inline">
    [\sigma_{\min}, \sigma_{\max}]
   </math>
   . In fact, such an object is not that easy to define in the classical probabilistic modeling framework, since two different volatility processes will typically yield mutually singular probability measures on the set of possible paths. A convenient framework is the stochastic control framework. In such a framework, the managing volatility being interpreted as a control, one tries to optimize a given expectation—the riskneutral price in this case. It turns out that stochastic optimal control will yield the optimal superstrategy price.
  </p>
  <p block-type="Text" class="has-continuation">
   Nevertheless, the connection between the superstrategy problem and stochastic control is not that obvious, and these need to be spelled out carefully in this respect. Recall that the stochastic control problem is the maximization of an expectation over a set of processes, whereas the superstrategy problem is
  </p>
  <p block-type="Text">
   the almost sure domination of the option payoff at maturity by a hedging strategy.
  </p>
  <p block-type="Text">
   Note that even in the UVM case, there are still plenty of open questions. In fact, a neat formulation of the superhedging problem is not a piece of cake. The issue is avoided in [2], handled partially in [7], and more formally in [8], where the model uncertainty is specified as a set of martingale probabilities on the canonical space, and also in [6]. Once this is done, a natural theoretical problem, given such a "model set", is to find out a formula for the cheapest superhedging price. The supremum of the risk-neutral prices over all the probabilities of the set will in general be strictly smaller than the cheapest price, even if they match in the UVM setting. The precise property of the "model set" that makes this equality remains to be clarified. Some partial results in this direction, with progresses towards a general theorem, are available in [4], where the case of path-dependent payoffs in the UVM framework is also solved.
  </p>
  <h4>
   Lagrangian UVM
  </h4>
  <p block-type="Text">
   In practice, the UVM approach is easy to implement for standard options by using the tree scheme described above, for example. It can be extended in the same way for path-dependent options. Nevertheless, when the price pops up, the usual reaction of the trader or risk officer is that the price is too high, especially too high to explain the observed market price.
  </p>
  <p block-type="Text">
   The fact that the price is high is a direct consequence of the total aversion approach in the superstrategy formulation, and also of the fact that the price corresponds to the worst-case scenario where the gamma changes signs exactly when the volatility switches regimes. This is a highly unlikely situation. To lower the price and fit in the traditional setting where one wants to fit the observed market price of liquid European calls and puts (so-called vanillas), Avellaneda, Levy, and Paras propose a constrained extension of the UVM model where the price of the complex products of the trader is handled within the UVM framework with the additional constraint of fitting the vanilla prices. By duality, this reduces to computing the UVM price for a portfolio parameterized by a Lagrangian multiplier and then minimizing the dual value function over the Lagrangian parameter. Mathematically speaking, let us consider an asset
   <math display="inline">
    S_t
   </math>
   and a payoff
   <math display="inline">
    \Phi(S_T)
   </math>
   .
   <i>
    m
   </i>
   European options with
  </p>
  <p block-type="TextInlineMath">
   payoffs
   <math display="inline">
    F_1(S_{T_1}), \ldots, F_m(S_{T_m})
   </math>
   with maybe different strikes and maturities are available for hedging; let
   <math display="inline">
    f_1,\ldots,f_m
   </math>
   be their respective market prices at the time of the valuation
   <math display="inline">
    t \leq \min(T, T_1, \ldots, T_m)
   </math>
   . Consider now an agent who buys quantities
   <math display="inline">
    \lambda_1, \ldots, \lambda_m
   </math>
   of each option. His total cost of hedging then reads
  </p>
  <p block-type="Equation">
   <math display="block">
    \Pi(t, S_t, \lambda_1, \dots, \lambda_m)\n
   </math>
   <math display="block">
    \n= \sup_{P \in \mathcal{P}} \left\{ e^{-r(T-t)} \Phi(S_T) - \sum_{i=1}^m \lambda_i e^{-r(T_i-t)} F_i(S_{T_i}) \right\}\n
   </math>
   <math display="block">
    \n+ \sum_{i=1}^m \lambda_i f_i \tag{7}
   </math>
  </p>
  <p block-type="TextInlineMath">
   where the supremum (sup) is calculated within the UVM framework as presented above, and we must specify a range
   <math display="inline">
    \Lambda_i^+ \leq \lambda_i \leq \Lambda_i^-
   </math>
   (
   <math display="inline">
    \Lambda_i^{\pm}
   </math>
   represent the quantities available on the market). The optimal hedge is then defined as the solution to the problem
  </p>
  <p block-type="Equation">
   <math display="block">
    \Pi^*(t, S_t) = \inf_{\lambda_1, \dots, \lambda_m} \Pi(t, S_t, \lambda_1, \dots, \lambda_m) \quad (8)
   </math>
  </p>
  <p block-type="TextInlineMath">
   In fact, the first-order conditions read
   <math display="inline">
    \frac{\partial \Pi}{\partial \lambda_i} = \sum_{i=1}^{m} f_i - \mathbb{E}^{P^*} \left( e^{-r(T_i - t)} F_i \left( S_{T_i} \right) \right) = 0
   </math>
   , where
   <math display="inline">
    P^*
   </math>
   realizes the sup above. These conditions exactly fit the model to observed market prices. The convexity of
   <math display="inline">
    \Pi(t, S_t, \lambda_1,
   </math>
   <math display="inline">
    \ldots, \lambda_m
   </math>
   ) with respect to
   <math display="inline">
    \lambda_i
   </math>
   ensures that if a minimum exists, then it is unique.
  </p>
  <p block-type="Text">
   This approach is very attractive from a theoretical point of view, but it is much harder to implement. The consistency of observed vanilla prices is a crucial step that is rarely met in practice. Even if numerous robust algorithms exist to handle the dual problem, their implementation is quite tricky. In fact, this constrained formulation implies a calibration property of the model, and the design of a stable and robust calibration algorithm is one of the greatest challenges in the field of financial derivatives.
  </p>
  <h4>
   The Curse of Nonlinearity
  </h4>
  <p block-type="Text" class="has-continuation">
   Another issue for a practitioner is the inherent nonlinearity of the UVM formulation. Most traditional models like BS, Heston, or Lévy-based models are linear models. The fact that an option price should depend on the whole portfolio of the trader is a nobrainer for risk officers, but this nonlinearity is a challenge for the modularity and the flexibility of
  </p>
  <p block-type="Text">
   pricing systems. This is very often a no-go feature in practice.
  </p>
  <p block-type="Text">
   The complexity of evaluating a portfolio in the UVM framework is real, as studied thoroughly by Avellaneda and Buff in [1]. Following [1], let us consider a portfolio with
   <math display="inline">
    n
   </math>
   options with payoffs
   <math display="inline">
    f_1, \ldots, f_n
   </math>
   and maturities
   <math display="inline">
    t_1, \ldots, t_n
   </math>
   . The computational problem becomes tricky when the portfolio consists of barrier options. Indeed, this means that, at any time step, the portfolio we are trying to value might be different (in case the stock price has reached the barrier of any option) from the one at the previous time step. Because of the nonlinearity, a PDE specific to this portfolio has to be solved in this case. Avellaneda and Buff [1] addressed this very issue: a naive implementation would require solving the
   <math display="inline">
    2^n - 1
   </math>
   nonlinear PDEs, each representing a subportfolio. They provide an algorithm to build the minimal number
   <math display="inline">
    N_n
   </math>
   of subportfolios (i.e., of nonlinear PDEs to solve) and show the following:
  </p>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     If the initial portfolio consists of barrier (single or double) and vanilla options, then
     <math display="inline">
      N_n \leq \frac{n(n+1)}{2}
     </math>
    </li>
    <li block-type="ListItem">
     If the initial portfolio only consists of single barrier options (
     <math display="inline">
      n_u
     </math>
     up-and-out ones and
     <math display="inline">
      n_d
     </math>
     =
     <math display="inline">
      n - n_u
     </math>
     down-and-out ones), then
     <math display="inline">
      N_n = n_d +
     </math>
     <math display="inline">
      n_u + n_d n_u
     </math>
     . This assumes that all the barriers are different. If some are identical, then the number of required computations decreases.
    </li>
   </ul>
  </p>
  <p block-type="Text">
   Numerically speaking, the finite-difference pricing is done on a lattice, matching almost exactly all the barriers. Nevertheless in [3], an optimal construction of the lattice to solve the PDEs is provided.
  </p>
  <h2>
   References
  </h2>
  <p block-type="ListGroup">
   <ul>
    <li block-type="ListItem">
     [1] Avellaneda, M. &amp; Buff, R. (1999). Combinatorial implications of nonlinear uncertain volatility models: the case of barrier options, Applied Mathematical Finance 1,
     <math display="inline">
      1 - 18
     </math>
    </li>
    <li block-type="ListItem">
     [2] Avellaneda, M., Levy, A. &amp; Paras, A. (1995). Pricing and hedging derivative securities in markets with uncertain volatilities, Applied Mathematical Finance 2, 73-88.
    </li>
    <li block-type="ListItem">
     [3] Avellaneda, M. &amp; Paras, A. (1996). Managing the volatility risk of portfolios of derivative securities: the Lagrangian uncertain volatility model, Applied Mathematical Finance 3, 21-52.
    </li>
    <li block-type="ListItem">
     [4] Denis, L. &amp; Martini, C. (2006). A theoretical framework for the pricing of contingent claims in the presence of model uncertainty, Annals of Applied Probability 16(2),
     <math display="inline">
      827 - 852
     </math>
    </li>
    <li block-type="ListItem">
     [5] El Karoui, N., Jeanblanc, M. &amp; Shreve, S. (1998). Robustness of the Black and Scholes formula, Mathematical Finance 8(2), 92-126.
    </li>
    <li block-type="ListItem">
     [6] Frey, R. (2000). Superreplication in stochastic volatility models and optimal stopping, Finance and Stochastics
     <math display="inline">
      4(2), 161-187.
     </math>
    </li>
    <li block-type="ListItem">
     [7] Lyons, T.J. (1995). Uncertain volatility and the risk-free synthesis of derivatives, Applied Mathematical Finance 2, 117-133.
    </li>
    <li block-type="ListItem">
     [8] Martini, C. (1997). Superreplications and stochastic control, IIIrd Italian Conference on Mathematical Finance, Trento.
    </li>
   </ul>
  </p>
  <h1>
   <b>
    Related Articles
   </b>
  </h1>
  <p block-type="Text">
   Black-Scholes Formula; Models; Stochastic Control.
  </p>
  <p block-type="Text">
   CLAUDE MARTINI &amp; ANTOINE JACQUIER
  </p>
 </body>
</html>
