## Doob-Meyer Decomposition

Submartingales are processes that grow on average. Subject to some condition of uniform integrability, they can be written uniquely as the sum of a martingale and a predictable increasing process. This result is known as the *Doob–Meyer decomposition*.

Consider a filtered probability space  $(\Omega, \mathscr{F},$  $\mathbf{F}$ ,  $P$ ). It consists of a probability space  $(\Omega, \mathscr{F}, P)$ and a *filtration*  $\mathbf{F} = (\mathscr{F}_t)_{t>0}$ , that is, an increasing family of sub- $\sigma$ -fields of  $\mathscr{F}$ . The  $\sigma$ -field  $\mathscr{F}_t$  stands for the information available at time  $t$ . A random event A belongs to  $\mathscr{F}_t$ , if we know at time t, whether it will take place or not, that is,  $A$  does not depend on randomness in the future. For technical reasons, one typically assumes right continuity, that is,  $\mathscr{F}_t = \bigcap_{s>t} \mathscr{F}_s$ .

A martingale (see Martingales) (respectively submartingale, supermartingale) is an adapted, integrable process  $(X_t)_{t \in \mathbb{R}_+}$  satisfying

$$E(X_t|\mathscr{F}_s) = X_s \tag{1}$$

(respectively  $\geq X_s$ ,  $\leq X_s$ ) for  $s \leq t$ . Moreover, we require these processes to be a.s. càdlàg, that is, rightcontinuous with left-hand limits. Adaptedness means that  $X_t$  is  $\mathscr{F}_t$ -measurable, that is, the random value  $X_t$  is known at the latest at time t. Integrability  $E(|X_t|) < \infty$  is needed for the conditional expectation to be defined. The crucial martingale equality (1) means that the best prediction of future values of  $X$  is the current value, that is,  $X$  will stay on the current level on average. In other words, it does not exhibit any positive or negative trend. If  $X$  denotes the price of a security, this asset does not produce profits or losses on average. Submartingales, on the other hand, grow on average. Put differently, they show an upward trend compared to a martingale. This loose statement is made precise in terms of the Doob-Meyer decomposition.

As a starting point, consider a discrete-time process  $X = (X_t)_{t=0,1,2,...}$ . In discrete time, a process  $X$  is called *predictable* if  $X_t$  is  $\mathscr{F}_{t-1}$ -measurable for  $t = 1, 2, \ldots$  This means that the value  $X_t$  is known already one period ahead. The *Doob decomposition* states that any submartingale  $X$  can be written uniquely as

$$X_t = M_t + A_t \tag{2}$$

with a martingale  $M$  and an increasing predictable process A satisfying  $A_0 = 0$ . While the intuitive meaning of  $M$  and  $A$  may not be obvious, the corresponding decomposition of the increments  $\Delta X_t :=$  $X_t - X_{t-1}$  is easier to understand.

$$\Delta X_t = \Delta M_t + \Delta A_t \tag{3}$$

can be interpreted in the sense that the increment  $\Delta X_t$ consists of a predictable trend  $\Delta A_t$  and a random deviation  $\Delta M_t$  from that trend. Its implication  $\Delta A_t =$  $E(\Delta X_t|\mathscr{F}_{t-1})$  means that  $\Delta A_t$  is the best prediction of  $\Delta X_t$  in a mean-square sense and based on the information up to time  $t-1$ .

The natural decomposition (3) does not make sense for continuous time processes but an analog of equation (2) still exists. To this end, the notion of predictability must be extended to continuous time. A process  $X = (X_t)_{t \in \mathbb{R}_+}$  is called *predictable* if—viewed as a mapping on  $\Omega \times \mathbb{R}_+$ —it is measurable with respect to the  $\sigma$ -field generated by all adapted, left-continuous processes. Intuitively, this rather abstract definition means that  $X_t$  is known slightly ahead of time  $t$ . In view of the discrete-time case, it may seem more natural to require that  $X_t$  be  $\mathscr{F}_{t-}$ -measurable, where  $\mathscr{F}_{t-}$  stands for the smallest sub- $\sigma$ -field containing all  $\mathscr{F}_s$ ,  $s < t$ . However, this slightly weaker condition turns out to be too weak for the general theory.

In order for a decomposition  $(2)$  into a martingale  $M$  and a predictable increasing process A to exist, one must assume some uniform integrability of  $X$ . The process  $X$  must belong to the so-called *class*  $(D)$ , which amounts to a rather technical condition implying  $\sup_{t>0} E(|X_t|) \leq \infty$  but being itself implied by  $E(\sup_{t>0} |\bar{X}_t|) \leq \infty$ . For its precise definition, we need to introduce the concept of a stopping time, which is not only an indispensable tool for the general theory of stochastic processes but also interesting for applications, for example, in mathematical finance. A  $[0, \infty]$ -valued random variable T is called *stopping time* if  $\{T \le t\} \in \mathcal{F}_t$  for any  $t \ge 0$ . Intuitively, T stands for a random time, which is generally not known in advance but at the latest once it has happened (e.g., the time of a phone call, the first time when a stock hits 100, the time when you crash your car into a tree). In financial applications, it appears, for example, as the exercise time of an American option.

Stopping times can be classified by their degree of suddenness. *Predictable* stopping times do not come entirely as a surprise because one anticipates them. Formally, a stopping time  $T$  is called *predictable* if it allows for an *announcing sequence*, that is, for a sequence  $(T_n)_{n\in\mathbb{N}}$  of stopping times satisfying  $T_0$  $T_1 < T_2 < \dots$  on  $\{T > 0\}$  and  $T_n \to T$  as  $n \to \infty$ . This is the case for a continuous stock price hitting 100 or for the car crashing into a tree, because you can literally see the level 100 or the tree coming increasingly closer. Phone calls, strikes of lightning, or jumps of Lévy process, on the other hand, are of an entirely different kind because they happen completely out of the blue. Such stopping times  $T$ are called *totally inaccessible*, which formally means that  $P(S = T < \infty) = 0$  for all predictable stopping times  $S$ .

Coming back to our original theme, a process  $X$  is said to be of *class* (D) if the set  $\{X_T : T \text{ finite stopping time}\}\$  is uniformly integrable, which in turn means that

$$\lim_{c \to \infty} \sup_{T \text{ finite stopping time}} E(1_{\{|X_T| > c\}} |X_T|) = 0$$

The *Doob–Meyer decomposition* can now be stated as follows:

**Theorem 1** Any submartingale  $X$  of class  $(D)$ allows for a unique decomposition

$$X_t = M_t + A_t \tag{4}$$

with a martingale  $M$  and some predictable increasing process A satisfying  $A_0 = 0$ .

The martingale  $M$  turns out to be of class (D) as well, which implies that it converges a.s. and in  $L^1$  to some terminal random variable  $M_{\infty}$ . Since the whole martingale  $M$  can be recovered from its limit via  $M_t = E(M_{\infty}|\mathscr{F}_t)$ , one can formally identify such *uniformly integrable martingales* with their limit.

In the case of an Itô process

$$\mathrm{d}X_t = H_t \mathrm{d}W_t + K_t \mathrm{d}t \tag{5}$$

the Doob-Meyer decomposition is easily obtained. Indeed, we have  $M_t = X_0 + \int_0^t H_s dW_s$  and  $A_t =$  $\int_0^t K_s ds$ . However, a general Itô process need not, of course, be a submartingale. However, equation  $(5)$  suggests that a similar decomposition exists for more general processes. This is indeed the case. For a generalization covering all Itô processes we relax both the martingale property of  $M$  and the monotonicity of  $A$ . In general,  $A$  is only required to be of finite variation, that is, the difference of two increasing processes. In the Itô process example, these are  $A_t^{(+)} = \int_0^t \max(K_s, 0) ds$  and  $A_t^{(-)} =$  $\int_0^t \max(-K_s, 0) ds$ . Put differently, the trend may change its direction every now and then.

To cover all Itô processes, one must also allow for local martingales rather than martingales.  $M$  is said to be a *local martingale* if there exists a sequence of stopping times  $(T_n)_{n\in\mathbb{N}}$ , which increases to  $\infty$ almost surely such that  $M^{T_n}$  is a martingale for any *n*. Here, the *stopped process*  $M^{T_n}$  is defined as  $M_t^{T_n} := M_{\min(T_n,t)}$ , that is, it stays constant after time  $T_n$  (as e.g., your wealth does if you sell an asset at  $T_n$ ). This rather technical concept appears naturally in the general theory of stochastic processes. For example, stochastic integrals  $M_t = \int_0^t H_s dN_s$  relative to martingales  $N$  generally fail to be martingales but are typically local martingales or a little less, namely,  $\sigma$ -martingales.

A local martingale is a uniformly integrable martingale, if and only if it is of class (D). Nevertheless, one should be careful with thinking that local martingales behave basically as martingales up to some integrability. For example, there exist local martingales  $M_t = \int_0^t H_s dW_s$  with  $M_0 = 0$  and  $M_1 = 1$  a.s. and such that  $E(|M_t|) < \infty$ ,  $t \ge 0$ . Even though such a process has no trend in a local sense, it behaves entirely differently from a martingale on a global scale. The difference between local martingales and martingales leads to many technical problems in mathematical finance. For example, the previous example may be interpreted in the sense that dynamic investment in a perfectly reasonable martingale may lead to arbitrage unless the set of trading strategies is restricted to some admissible subset.

Let us come back to generalizing the Doob–Meyer decomposition. Without class (D) it reads as follows:

**Theorem 2** Any submartingale  $X$  allows for a unique decomposition  $(4)$  with a local martingale M and some predictable increasing process A satisfying  $A_0 = 0.$ 

For a considerably larger class of processes  $X$ , there exists a canonical decomposition (4) with a local martingale  $M$  and some predictable process  $A$ of finite variation, which starts in 0. These processes are called *special semimartingales* and they play a key role in stochastic calculus. The slightly larger

class of *semimartingales* is obtained, if  $A$  is only required to be adapted rather than predictable. This class is, in some sense, the largest one that allows for the definition of a stochastic integral  $\int_0^t H_s dX_s$ satisfying a mild continuity property. In the general semimartingale case, decomposition (4) should not be called canonical because it is not unique. Moreover,  $A$  should not be regarded as a trend unless it is predictable. On the other hand, if the jumps of a semimartingale  $X$  are sufficiently integrable (e.g., bounded), then  $X$  is special and hence allows for a canonical decomposition resembling the Doob-Meyer decomposition of a submartingale.

## **Further Reading**

Protter, P. (2004). Stochastic Integration and Differential Equations, 2nd Edition, Version 2.1, Springer, Berlin.

## **Related Articles**

American Options; Martingales; Semimartingale.

JAN KALLSEN