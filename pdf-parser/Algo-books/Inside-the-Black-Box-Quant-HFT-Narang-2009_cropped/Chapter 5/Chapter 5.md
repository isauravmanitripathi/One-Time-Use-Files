CHAPTER -

# Transaction Cost Models

Without frugality, none can be rich, and with it, very few would be poor.

-Samuel Johnson

**n** o far we have examined alpha models and risk models, both critical ele**u** ments of the black box. The alpha model plays the role of the starry-eyed optimist, and the risk model plays the role of the nervous worrier. In this metaphor, transaction cost models would be the frugal accountant.

The idea behind transaction cost models is that it costs money to trade, which means that one should not trade unless there is a very good reason to do so. This is not an overly draconian view of trading costs. Many highly successful quants estimate that their transaction costs eat away between 20 and 50 percent of their returns.

In the world of quant trading, there are only two reasons to make a trade: first, if it improves the odds or magnitude of making money (as indicated by the alpha model), or second, if it reduces the odds or magnitude of losing money (as indicated by the risk model). These reasons, however, are subject to a caveat: A tiny, incremental improvement in the reward or risk prospects of a portfolio might not be sufficient to overcome the cost of trading. In other words, the benefits of the trade need to clear the hurdle of the cost of transacting. Neither the market nor your broker care what the benefits of a trade are. Rather, making a given trade utilizes services that cost the same regardless of the purpose or value the trade holds for the trader. A transaction cost model is a way of quantifying the cost of making a trade of a given size so that this information can be used in conjunction with the alpha and risk models to determine the best portfolio to hold.

Note that transaction cost models are not designed to minimize the cost of trading, only to inform the portfolio construction engine of the costs of making any given trade. The part of the black box that minimizes costs is the execution algorithm, which we discuss at length in Chapter 7. It is less glamorous to describe costs than it is to minimize them, but the former remains critically important. If a trader underestimates the cost of transacting, this can lead to the system making too many trades that have insufficient benefit, which in turn leads to a problem of bleeding losses as a result of the constant acceptance of trading costs. If the trader overestimates the cost of transacting, this can lead to too little trading, which usually results in holding positions too long. Either way, the trader ends up with suboptimal performance, which highlights the importance of correctly estimating transaction costs. But there is also a trade‐off between using more complex models that more accurately describe transaction costs and using less complex models that are faster and less computationally burdensome.

# Defining Transaction Costs

It is useful to understand what the costs of trading actually are, since we are describing ways to model them. Transaction costs have three major components: commissions and fees, slippage, and market impact.

#### Commissions and Fees

Commissions and fees, the first kind of transaction costs, are paid to brokerages, exchanges, and regulators for the services they provide, namely, access to other market participants, improved security of transacting, and operational infrastructure. For many quants, brokerage commission costs are rather small on a per‐trade basis. Quant traders typically do not utilize many of the services and personnel of the bank but instead use only the bank's infrastructure to go directly to the market. The incremental cost of a trade to a bank is therefore very small, and even very low commissions can be profitable. Given the volume of trading that quants do, they can be extremely profitable clients for the brokerages, despite the diminutive commissions they pay. Some quants utilize significantly less of the bank's infrastructure and therefore pay even lower commission rates than others who use more and pay higher rates.

Commissions are not the only costs charged by brokerages and exchanges. Brokers charge fees (which are usually a component of the commissions) for services known as *clearing* and *settlement*. Clearing involves regulatory reporting and monitoring, tax handling, and handling failure, all of which are activities that must take place in advance of settlement. Settlement is the delivery of securities in exchange for payment in full, which is the final step in the life of a trading transaction and fulfills the obligations of both parties involved in the transaction. These services take effort and therefore cost money. And, given that many quants are doing tens of thousands of trades each day, there can be a significant amount of work involved.

Exchanges and electronic matching networks provide a different kind of service from conventional brokers, namely access to pools of liquidity. Exchanges must attract traders to their floors for trading, and this trading volume then attracts other traders who are seeking liquidity. Exchanges, too, have some operational effort to make by virtue of their roles, and they also guarantee that both counterparties in a given trade uphold their contractual responsibilities. As such, exchanges also charge small fees for each transaction to cover their costs and risks (and, of course, to profit as a business). More recently, *dark pools*, which are effectively matching engines to pair buyers and sellers of the same instrument at the same time within a given bank's customer base, have come into prominence, and now account for a large percentage of all U.S. equity trading volumes (32 percent in 2012, according to the Tabb Group).1

#### Slippage

Commissions and fees certainly are not negligible. But neither are they the dominant part of transaction costs for most quants. They are also basically fixed, which makes them easy to model. If the all‐in commissions and fees add up to, say, \$0.001 per share, the quant must simply know that the trade in question is worth more in terms of alpha generation or risk reduction than this \$0.001 per‐share hurdle. On the other hand, slippage and market impact are considerably trickier to measure, model, and manage.

*Slippage* is the change in the price between the time a trader (or quant system) decides to transact and the time when the order is actually at the exchange for execution. The market is constantly moving, but a trading decision is made as of a specific point in time. As time passes between the decision being made and the trade being executed, the instrument being forecast is likely to be moving away from the price at which it was quoted when the forecast was made. In fact, the more accurate the forecast, the more likely it is that the price of the instrument is actually going toward the expected price as more time passes. But the instrument makes this move without the trader benefiting, because he has not yet gotten his trade to market. Imagine a trader decides to sell 100 shares of CVX while the price is at \$100.00 per share. When the trader finally gets the order through his broker and to the exchange, the price has gone down to \$99.90 per share, for a decline of \$0.10 per share. This \$0.10 per share is a cost of the transaction because the trader intended to sell at \$100.00, but in fact the price had already moved down to \$99.90. In the event that the price actually moves up from \$100.00 to \$100.10, the trader gets to sell at a higher price, which means that slippage can sometimes be a source of positive return.

Strategies that tend to suffer most from slippage are those that pursue trend‐following strategies, because they are seeking to buy and sell instruments that are already moving in the desired direction. Strategies that tend to suffer least from slippage, and for which slippage can sometimes be a *positive*, are those that are mean reverting in orientation, because these strategies are usually trying to buy and sell instruments that are moving against them when the order is placed. A quant trader's latency or speed to market has a large effect on the level of slippage his strategy will experience over time. This is because slippage is a function of the amount of time that passes between the order being decided and the order reaching the market for execution. The more latency in a trader's system or communications with the marketplace, the more time passes before her order gets to the market and the further the price of an instrument is likely to have moved away from the price when the decision was made. Worse still, the more accurate a forecast, particularly in the near term, the more damaging slippage will be.

In addition to time, slippage is also a function of the volatility of the instrument being forecast. If we are forecasting 90‐day Treasury bills, which tend to move very slowly throughout the day and which can go some weeks without much movement at all, it is likely that slippage is not a major factor. On the other hand, if we are forecasting a high‐volatility Internet stock, slippage can be a major issue. Google, Inc. (GOOG) has had an average daily range of 2.6 percent of its opening price, which is about 16 times larger than its average move from one day to the next. Clearly, slippage makes a huge difference if you're trading GOOG.

#### Market Impact

*Market impact*, the third and final major component of transaction costs, is perhaps the most important for quants. The basic problem described by market impact is that, when a trader goes to buy an instrument, the price of the instrument tends to go up, partly as a result of the trader's order. If the trader sells, the price goes down as he attempts to complete his trade. At small order sizes, this price movement usually bounces between the current best bid and offer. However, for larger orders, the price move can be substantial, ranging in the extremes, even to several percentage points. Market impact, then, is a measurement of how much a given order moves the market by its demand for liquidity. Market impact is normally defined as the difference between the price at the time a market order enters the exchange and the price at which the trade is actually executed.

The basic idea behind market impact is simple enough and is based on the ubiquitous principle of supply and demand. When a trader goes to market to execute a trade for some size, someone has to be willing to take the other side, or supply the size he is looking to trade. The bigger the size of the demand by a trader, the more expensive the trade will be because the trader must access more of the supply. As simple as the idea of market impact is, quantifying it is actually not so straightforward. One doesn't know how much a particular trade impacts the market until the trade has already been completed, which may be too late to be useful. Also, there are many other factors that can drive a given observation of market impact and that can complicate its measurement. For example, the number of other trades that are being made in the same direction at the same time or whether news in the stock is causing impact to behave differently from normal are both issues that would affect measurements of market impact and are nontrivial to quantify. These other factors are also usually impossible to predict, much less control. Therefore, market impact as used in transaction cost modeling usually does not account for these factors but rather focuses on the size of the order relative to the liquidity present at the time. *Liquidity* can be defined in a number of ways, whether by the size available at the bid or offer or by measurements of the depth of book, which relate to those bids or offers that have been placed away from the best bid/offer prices.

In addition, there could be some interaction between slippage and market impact that makes it tricky to segregate these two concepts in a model. A stock might be trending upward while a trader is trying to sell it, for example. In this case, both slippage and impact could look like *negative* numbers. In other words, the trader might deduce that he was actually *paid*, not charged, to sell the stock. For instance, assume that a trader decides to enter a market order to sell a stock he owns, and at that moment, the stock's price happens to be \$100.00. But by the time his order hits the market, the stock, continuing its trend upward, is now trading at \$100.05. Slippage is actually *negative* \$0.05 because his order entered the marketplace at a more favorable price than the one at which he decided to sell. But now assume that the price continues to drift upward as his order makes its way to the front of the line of sale orders, simply because the marketplace's demand to buy the shares might simply overwhelm the orders, including his, to sell it. The trader ultimately sells his stock at \$100.20, generating negative market impact of \$0.15 on top of the negative slippage of \$0.05. Clearly, entering sell orders does not usually make stocks go up, but in this case, it might not be possible to differentiate impact from slippage or either concept from the move the stock was making independently of the trader's order. Did his sell order slow the rise of the stock somewhat, and if so, by how much? These are the kinds of complications that traders must account for in building transaction cost models.

Some kinds of trades further complicate the measurement of transaction costs. We have discussed trades that demand liquidity from the marketplace, and these behave as one might expect intuitively: If a trader demands liquidity, there is a cost charged by those providing it. Looking at this from the opposite perspective, someone gets paid to *supply* liquidity. Historically, the party that supplied liquidity was a market maker or specialist whose job it was to make sure that traders can execute an order when they want to. More recently, volumes across many electronically tradable instruments have increased sufficiently to allow for well‐functioning marketplaces without the presence of a market maker in the middle.

*Electronic communication networks* (ECNs) are examples of platforms for customers to trade directly with one another. The challenge for ECNs is to attract enough customer order flow to show abundant liquidity on their exchanges. ECNs also must provide robust technology so that their exchanges can continue to function without disruption. To attract providers of liquidity, most ECNs in equity markets have established methods to pay traders who provide liquidity and take payment from traders who demand liquidity. It might cost something like three‐tenths of a penny per share for a trader who buys shares at the offer or sells shares at the bid, whereas those providing the bids and offers that are getting hit are earning closer to two‐tenths of a penny. The ECN keeps the difference, around one‐tenth of a penny per share, as its source of revenue. Some kinds of trading strategies (usually mean reversion strategies) actually call for a mostly passive execution approach in which this act of providing liquidity is modeled as a source of profit due to the rebate programs that ECNs put in place to attract liquidity providers. It is worth noting that some ECNs and exchanges, especially outside of the equities markets, offer no rebates and do not charge customers to take liquidity. There are also inverse exchanges, which pay takers of liquidity and charge providers of liquidity.

*Dark pools* also allow customers to interact with one another. Dark pools are created by brokers or independent firms to allow their customers to trade directly with each other in an anonymous way. They arose in part because of concerns about the market impact associated with large orders. On a dark pool, there is no information provided about the limit order book, which contains all the liquidity being provided by market makers and other participants. Customers are simply posting their orders to the pool and if someone happens to want to do the opposite side of those orders, the orders get filled. As a result of this anonymous process of matching orders, the market is less likely to move as much as it would in a more public venue, where automated market making practitioners require compensation to take the other side of large orders. One fact that makes dark pool transactions somewhat unusual is that they are over‐the‐counter, off‐ exchange transactions in instruments that are exchange traded. Dark pools could not exist without the public markets, because the securities traded on dark pools are listed on public exchanges. Furthermore, the public markets provide the only transparent sense of price discovery, without which dark pool participants would have a significantly harder time determining what prices to bid and offer. Partly because of these issues, coupled with the fact that dark pools are available only to selected customers, controversy surrounds dark pools.

# Types of Transaction Cost Models

There are four basic types of transaction cost models—flat, linear, piecewise‐linear, and quadratic—all of which are trying to answer the basic question of how much it will cost to transact a given trade. Some of these costs are fixed and known—for example, commissions and fees. Models of transaction costs use these fixed charges as a baseline, below which the expense of trading cannot go. Other costs, such as slippage and impact, are variable and cannot be known precisely until they have been incurred. Slippage is affected by a number of factors, such as the volatility of the instrument in question (i.e., the higher the volatility, the greater the expectation of slippage) or its prevailing trend (i.e., the stronger the trend, the more slippage is likely to cost if one attempts to transact in the direction of the trend). Impact also has many drivers, including the size of the order being executed, the amount of liquidity that happens to be available to absorb the order, and imbalances between supply and demand for the instrument at the moment. Traders use transaction cost models in an attempt to develop reasonable expectations for the cost of an order of various sizes for each name they trade.

It is worth mentioning that each instrument has its own unique characteristics based on the investor base that tends to transact in it and the amount of liquidity and volatility present in the instrument over time. GOOG doesn't trade exactly like Amazon (AMZN), and CVX doesn't trade exactly like XOM. As a result, in an effort to improve their estimates of transaction costs, many quants build separate models for transaction costs for each instrument in their portfolios and allow each of these models to evolve over time based on the trading data the quant collects from his execution systems. In other words, many transaction cost models are highly empirical, allowing the actual, observable, recorded transaction data from a quant's own strategy to drive and evolve the model over time.

The total cost of transactions for an instrument, holding all else constant (such as liquidity, trend, or volatility), can be visualized as a graph with the size of the order (in terms of dollars, shares, contracts, or the like) on the *x*‐axis and the cost of trading on the *y*‐axis. It is generally accepted by the quant community that the shape of this curve is *quadratic*, which means that the cost gets higher ever more quickly as the size of the trade gets larger (due to market impact). Certainly many quants do model transaction costs as a quadratic function of the size of the trade (more on this later). However, modeling transaction costs this way can be more complicated and computationally intensive, whereas the other choices of modeling transaction costs are simpler and less intensive.

With advances in computer hardware and processors, the extra computational burdens are now rather easily managed, but that does not alter the fact that a proper quadratic cost function is inherently more complicated. These functions, from the simplest to the most complex, are described in the following sections.

#### Flat Transaction Cost Models

The first kind of transaction cost model is a *flat* model, which means that the cost of trading is the same, regardless of the size of the order. This is extremely straightforward computationally, but it is rarely correct and is not widely used. A graph of a flat transaction cost model is shown in Exhibit 5.1.

As you can see, this graph models the cost of a trade as being fixed, regardless of the size of the trade, which is an assumption that seems obviously incorrect in most circumstances. The main circumstance in which such a model is reasonable is if the size being traded is nearly always about the same and liquidity remains sufficiently constant. In this case, one can simply figure out the total cost of such a trade and assume that it will always cost the same. This assumption is wrong, but being wrong has no consequence because the size of the trade is always the same. Note that where the solid line crosses the dashed line, the model is close to a correct estimate of transaction costs. So, if this point of intersection corresponds to the size of trading normally done, and if the range of that trade size is within the region where the flat line is close to the curved line, a flat t‐cost model may not be problematic.

![](_page_8_Figure_1.jpeg)

Exhibit 5.1 Flat Transaction Cost Function

## Linear Transaction Cost Models

The second kind of transaction cost model is *linear*, which means that the cost of a transaction gets larger with a constant slope as the size of the transaction grows larger, as shown in Exhibit 5.2. This is a better fit relative to the true transaction cost, but it is still mostly useful as a shortcut to building a proper model.

As you can see, the linear transaction cost model must trade off overestimating costs at smaller trade sizes with underestimating costs at larger trade sizes. Here, again, the model is correct where the solid line crosses the dashed line and is close to correct in the immediate vicinity of that intersection. As with the flat t‐cost model, if the trades being done are always within that region, a linear t‐cost model is reasonable. In any case, across the curve, it appears to be a better estimator of the real transaction cost than is given by the flat transaction cost model.

### Piecewise-Linear Transaction Cost Models

*Piecewise‐linear* transaction cost models are used to help with precision while using reasonably simple formulas to do so. The idea of a piecewise‐ linear transaction cost model is that, in certain ranges, a linear estimate is about right, but at some point, the curvature of the quadratic estimator causes a significant enough rise in the slope of the real transaction cost line

![](_page_9_Figure_1.jpeg)

Exhibit 5.2 Linear Transaction Cost Function

that it is worthwhile to use a new line from that point on. This concept is illustrated in Exhibit 5.3.

As you can see, the accuracy of this type of model is significantly better than what can be achieved with flat or linear models across a much wider range of trading sizes; as a result, this model is rather popular among quants as a happy medium between simplicity and accuracy.

![](_page_9_Figure_5.jpeg)

Exhibit 5.3 Piecewise‐Linear Transaction Cost Function

#### Quadratic Transaction Cost Models

Finally, quants can build *quadratic* models of transaction costs. These are computationally the most intensive because the function involved is not nearly as simple as what is used for a linear model, or even for a piecewise‐linear model. It has multiple terms and exponents, and generally is a pain to build. A plot of a quadratic transaction cost model is shown in Exhibit 5.4.

This is clearly the most accurate estimate we have seen of transaction costs. And yet it is not perfect, and it is significantly more difficult to build and utilize than a linear or piecewise linear model. You might be wondering how it is that we have estimated a quadratic function using a quadratic function and still ended up with a less than perfect estimate of the true transaction cost. The reason is that the solid line reflects what is *expected*, whereas the dotted line reflects what is *actually observed* after the fact. This is a significant difference because the solid line must be specified before trading, whereas the dotted line is what is observed empirically after trading. Because the actual transaction cost is an empirically observable fact and any estimation of transaction costs is a prediction, the prediction is unlikely to be perfect. Causes of differences between estimated and realized transaction costs might include changes in liquidity or volatility in the instrument over time or changes in the types of traders (e.g., market makers, hedge funds, mutual funds, or retail investors) who are transacting in

![](_page_10_Figure_4.jpeg)

Exhibit 5.4 Quadratic Transaction Cost Function

the same stock over time. Of course, the quant is trying as hard as possible to make good forecasts, but given that it is known that the forecast is very unlikely to be perfect and that speed and simplicity are both also desirable, the trade‐off between accuracy and simplicity is one that requires the judgment of the quant.

Regardless of the type of model used, the quant must describe the cost of trading each instrument in her universe. After all, a less liquid small cap stock is likely to be more expensive to trade than a more liquid mega cap stock, and that must be a factor in deciding how much of each to trade. Furthermore, the quant should refresh empirical estimations of transaction costs both to keep the model current with the prevailing market conditions as well as to indicate when more research is required to improve the model itself.

# Summary

The role of transaction cost models is simply to advise the portfolio construction model how much it might cost to transact. Its job is *not* to minimize the cost of trading, just as the job of the alpha model is not to generate returns but rather to make forecasts and to provide these forecasts to the portfolio construction model. Cost minimization happens in two phases. First, the portfolio construction model, using the input provided by the transaction cost model, accounts for cost in generating a target portfolio. Second, the target portfolio is passed along to the execution algorithms, which explicitly attempt to transact the desired portfolio as cheaply as possible.

There are several kinds of transaction models, ranging from extremely simple to rather complex. The simpler models are useful for traders who either do trades of roughly the same size in a given instrument all the time or who trade in such small sizes that they can simply assume a modest cost and be close to correct most of the time. The more complex models are useful for quants who have the potential to trade significant, or significantly variable, quantities of a given instrument in a short period. Any of the four models described here can be valid in the right set of circumstances. The question to consider is whether the model chosen fits the application and facts of the situation.

We turn our attention next to portfolio construction models, which utilize the inputs provided by the alpha, risk, and transaction cost models described over the past three chapters, and come up with a target portfolio designed to maximize returns relative to risk. But first we check our progress on the map of the black box in Exhibit 5.5.

![](_page_12_Figure_1.jpeg)

![](_page_12_Figure_2.jpeg)

# [Note](http://www.businessweek.com/articles/2012%E2%80%9005%E2%80%9010/where%E2%80%90has%E2%80%90all%E2%80%90the%E2%80%90stock%E2%80%90trading%E2%80%90gone)

1. Matthew Philips, "Where Has all the Stock Trading Gone?" May 10, 2012, www .businessweek.com/articles/2012‐05‐10/where‐has‐all‐the‐stock‐trading‐gone.